(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5823],{20067:function(){},72061:function(){},29938:function(e,t,s){Promise.resolve().then(s.bind(s,43410))},43410:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eu}});var a=s(57437),n=s(86864),i=s(2265),r=s(69842),l=s(89506),o=s(39343),c=s(31014),d=s(59917),u=s(89733),m=s(93363),f=s(77209),x=s(48185),p=s(3274),h=s(96273),j=s(86763),v=s(87786),g=s(18473),N=s(60343);function w(e){let{control:t,name:s,label:n,description:i}=e;return(0,a.jsx)(m.Wi,{control:t,name:s,render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm flex-1 min-w-[250px]",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(m.lX,{children:n}),i&&(0,a.jsx)(m.pf,{children:i})]}),(0,a.jsx)(m.NI,{children:(0,a.jsx)(N.r,{checked:t.value,onCheckedChange:t.onChange})})]})}})}let b=d.Ry({title:d.Z_().min(2,{message:"Ο τίτλος πρέπει να έχει τουλάχιστον 2 χαρακτήρες."}),description:d.Z_().optional(),hasCode:d.O7().default(!1),isProtected:d.O7().default(!1)});function y(e){let{fetchAllLists:t}=e,[s,n]=(0,i.useState)(!1),{toast:d}=(0,j.pm)(),{user:N}=(0,v.a)(),y=(0,o.cI)({resolver:(0,c.F)(b),defaultValues:{title:"",description:"",hasCode:!1,isProtected:!1}}),C=async e=>{if(!N){d({variant:"destructive",title:"Σφάλμα",description:"Δεν έχετε δικαίωμα για αυτή την ενέργεια."});return}n(!0);try{let s={title:e.title,description:e.description,hasCode:e.hasCode,isProtected:e.isProtected},a=(0,r.JU)((0,r.hJ)(l.db,"tsia-custom-lists"));await (0,r.pl)(a,{...s,createdAt:(0,r.Bt)()}),await (0,g.a)("CREATE_LIST",{entityId:a.id,entityType:"custom-list",name:s.title}),d({title:"Επιτυχία",description:"Η λίστα δημιουργήθηκε."}),y.reset(),t()}catch(e){d({variant:"destructive",title:"Σφάλμα",description:"Η δημιουργία απέτυχε: ".concat(e.message)})}finally{n(!1)}};return(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsx)(x.ll,{children:"Δημιουργία Νέας Λίστας"}),(0,a.jsx)(x.SZ,{children:"Δημιουργήστε μια νέα λίστα επιλογών για χρήση σε όλη την εφαρμογή. Το ID της λίστας θα παραχθεί αυτόματα."})]}),(0,a.jsx)(x.aY,{children:(0,a.jsx)(m.l0,{...y,children:(0,a.jsxs)("form",{onSubmit:y.handleSubmit(C),className:"space-y-6",children:[(0,a.jsx)(m.Wi,{control:y.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{children:[(0,a.jsx)(m.lX,{children:"Τίτλος Λίστας"}),(0,a.jsx)(m.NI,{children:(0,a.jsx)(f.I,{placeholder:"π.χ. Τύποι Διευθύνσεων",...t})}),(0,a.jsx)(m.zG,{})]})}}),(0,a.jsx)(m.Wi,{control:y.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.xJ,{children:[(0,a.jsx)(m.lX,{children:"Περιγραφή (Προαιρετικό)"}),(0,a.jsx)(m.NI,{children:(0,a.jsx)(f.I,{placeholder:"Μια σύντομη περιγραφή του σκοπού της λίστας.",...t})}),(0,a.jsx)(m.zG,{})]})}}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsx)(w,{control:y.control,name:"hasCode",label:"Η λίστα περιέχει κωδικό;",description:"Ενεργοποιήστε αν κάθε στοιχείο έχει και έναν μοναδικό κωδικό."}),(0,a.jsx)(w,{control:y.control,name:"isProtected",label:"Προστατευμένη Λίστα;",description:"Εμποδίζει τη διαγραφή της λίστας από το UI (εκτός admin)."})]}),(0,a.jsxs)(u.z,{type:"submit",disabled:s,children:[s?(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Δημιουργία Λίστας"]})]})})})]})}var C=s(35265),k=s(6649),S=s(10883),R=s(42421),E=s(49354);function z(e){let{list:t,isOpen:s,canBeModified:n,onToggle:r,onUpdate:l,onDelete:o}=e,[c,d]=(0,i.useState)(!1),[m,x]=(0,i.useState)(t.title),[p,h]=(0,i.useState)(!1),[j,v]=(0,i.useState)(t.description||""),g=e=>{"title"===e?(d(!1),l("title",m)):(h(!1),l("description",j))},N=(e,t)=>{("Enter"===e.key||"Escape"===e.key)&&e.currentTarget.blur()},w=(e,t)=>{e.stopPropagation(),"title"===t?d(!0):h(!0)};return(0,a.jsxs)("div",{className:"flex items-center w-full px-4 rounded-md",children:[(0,a.jsxs)("div",{className:"flex-1 text-left py-4 cursor-pointer",onClick:r,children:[c?(0,a.jsx)(f.I,{value:m,onChange:e=>x(e.target.value),onBlur:()=>g("title"),onKeyDown:e=>N(e,"title"),autoFocus:!0,className:"h-8 font-bold text-base",onClick:e=>e.stopPropagation()}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-bold text-base",children:t.title}),n&&(0,a.jsx)(u.z,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:e=>w(e,"title"),children:(0,a.jsx)(k.Z,{className:"h-3 w-3"})})]}),p?(0,a.jsx)(f.I,{value:j,onChange:e=>v(e.target.value),onBlur:()=>g("description"),onKeyDown:e=>N(e,"description"),autoFocus:!0,className:"h-8 text-sm text-muted-foreground mt-1",onClick:e=>e.stopPropagation()}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t.description||"Δεν υπάρχει περιγραφή"}),n&&(0,a.jsx)(u.z,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:e=>w(e,"description"),children:(0,a.jsx)(k.Z,{className:"h-3 w-3"})})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:["ID: ",t.id]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[n&&(0,a.jsx)(u.z,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:e=>{e.stopPropagation(),o()},title:"Διαγραφή Λίστας",children:(0,a.jsx)(S.Z,{className:"h-4 w-4"})}),(0,a.jsx)(R.Z,{className:(0,E.cn)("h-4 w-4 shrink-0 transition-transform duration-200 cursor-pointer",s&&"rotate-180"),onClick:r})]})]})}var I=s(4919),_=s(92513);async function P(e,t,s){if(!e||"string"!=typeof e||!e.trim())throw Error("Invalid or empty listId provided.");let a=(0,r.JU)(l.db,"tsia-custom-lists",e);if(!(await (0,r.QT)(a)).exists())throw Error("List not found.");let n=(0,r.hJ)(a,"tsia-items"),i=(await (0,r.PL)(n)).docs.map(e=>e.data()),o=[];if(0===(o=s?t.split(/[\r\n]+/).map(e=>e.trim()).filter(Boolean).map(e=>{let t=e.indexOf(" ");return -1===t?{code:e,value:e}:{code:e.substring(0,t).trim(),value:e.substring(t+1).trim()}}).filter(e=>e.code&&!i.some(t=>{var s,a;return(null===(s=t.code)||void 0===s?void 0:s.toLowerCase())===(null===(a=e.code)||void 0===a?void 0:a.toLowerCase())})):t.split(/[;\n\r\t]+/).map(e=>e.trim()).filter(Boolean).filter(e=>!i.some(t=>t.value.toLowerCase()===e.toLowerCase())).map(e=>({value:e}))).length)throw Error("Όλα τα στοιχεία που εισάγατε υπάρχουν ήδη.");let c=(0,r.qs)(l.db);o.forEach(e=>{let t=(0,r.JU)(n);c.set(t,{...e,createdAt:(0,r.Bt)()})}),await c.commit()}function L(e){let{listId:t,hasCode:s,fetchAllLists:n}=e,[r,l]=(0,i.useState)(""),[o,c]=(0,i.useState)(!1),{toast:d}=(0,j.pm)(),m=async()=>{if(r.trim()){c(!0);try{await P(t,r,s),d({title:"Επιτυχία",description:"Τα στοιχεία προστέθηκαν."}),l(""),n()}catch(e){d({variant:"destructive",title:"Σφάλμα",description:"Η προσθήκη απέτυχε: ".concat(e.message)})}finally{c(!1)}}};return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-sm",children:"Προσθήκη Στοιχείων"}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(I.g,{placeholder:s?"Εισάγετε ΚΩΔΙΚΟΣ [κενό] ΟΝΟΜΑΣΙΑ, ένα ανά γραμμή.":"Εισάγετε πολλαπλά στοιχεία με Enter, ; ή Tab.",value:r,onChange:e=>l(e.target.value),className:"min-h-[80px]"}),(0,a.jsxs)(u.z,{onClick:m,disabled:o,size:"sm",className:"w-fit",children:[o?(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(_.Z,{className:"mr-2 h-4 w-4"}),"Προσθήκη στοιχείων"]})]})]})}function Z(e){let{item:t,hasCode:s,canBeModified:n,onEdit:i,onDelete:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s&&(0,a.jsx)("span",{className:"font-mono text-xs bg-muted px-2 py-1 rounded-md",children:t.code}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,a.jsx)("span",{className:"text-sm truncate",children:t.value}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground font-mono truncate",children:["ID: ",t.id]})]})]}),n&&(0,a.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[(0,a.jsx)(u.z,{variant:"ghost",size:"icon",onClick:i,title:"Επεξεργασία",children:(0,a.jsx)(k.Z,{className:"h-4 w-4"})}),(0,a.jsx)(u.z,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:r,title:"Διαγραφή",children:(0,a.jsx)(S.Z,{className:"h-4 w-4"})})]})]})}function A(e){let{editValue:t,setEditValue:s,editCode:n,setEditCode:i,onSave:r,onCancel:l,hasCode:o}=e,c=e=>{"Enter"===e.key?r():"Escape"===e.key&&l()};return(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[o&&(0,a.jsx)(f.I,{value:n,onChange:e=>i(e.target.value),onBlur:r,onKeyDown:c,autoFocus:!0,className:"h-8 w-24"}),(0,a.jsx)(f.I,{value:t,onChange:e=>s(e.target.value),onBlur:r,onKeyDown:c,className:"h-8 flex-1",autoFocus:!o})]})}function O(e){let{item:t,listId:s,hasCode:n,canBeModified:o,fetchAllLists:c}=e,{toast:d}=(0,j.pm)(),[u,m]=(0,i.useState)(!1),[f,x]=(0,i.useState)(t.value),[p,h]=(0,i.useState)(t.code||""),v=async()=>{let e=f.trim(),a=p.trim(),i=e!==t.value,o=n&&a!==(t.code||"");if(i||o){let i={value:e};n&&(i.code=a);try{await (0,r.r7)((0,r.JU)(l.db,"tsia-custom-lists",s,"tsia-items",t.id),i),d({title:"Επιτυχία",description:"Το στοιχείο ενημερώθηκε."}),c(),m(!1)}catch(e){d({variant:"destructive",title:"Σφάλμα",description:"Η ενημέρωση απέτυχε: ".concat(e.message)})}}else m(!1)},g=async()=>{if(!confirm('Είστε σίγουροι ότι θέλετε να διαγράψετε το στοιχείο "'.concat(t.value,'"')))return!1;try{await (0,r.oe)((0,r.JU)(l.db,"tsia-custom-lists",s,"tsia-items",t.id)),d({title:"Επιτυχία",description:'Το στοιχείο "'.concat(t.value,'" διαγράφηκε.')}),c(),m(!1)}catch(e){d({variant:"destructive",title:"Σφάλμα",description:"Η διαγραφή απέτυχε: ".concat(e.message)})}};return(0,a.jsx)("div",{className:"flex items-center justify-between p-2 rounded-md hover:bg-muted/50 group min-h-[40px]",children:u?(0,a.jsx)(A,{editValue:f,setEditValue:x,editCode:p,setEditCode:h,onSave:v,onCancel:()=>{x(t.value),h(t.code||""),m(!1)},hasCode:n}):(0,a.jsx)(Z,{item:t,hasCode:n,canBeModified:o,onEdit:()=>m(!0),onDelete:g})})}function T(e){let{items:t,listId:s,hasCode:n,canBeModified:i,fetchAllLists:r}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"font-semibold text-sm",children:["Υπάρχοντα Στοιχεία (",t.length,")"]}),t.length>0?t.map(e=>(0,a.jsx)(O,{item:e,listId:s,hasCode:n,canBeModified:i,fetchAllLists:r},e.id)):(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Δεν υπάρχουν στοιχεία σε αυτή τη λίστα."})]})}function U(e){let{list:t,isOpen:s,onToggle:n,fetchAllLists:i}=e,{isAdmin:o}=(0,v.a)(),{toast:c}=(0,j.pm)(),d=async(e,s)=>{let a={};if("title"===e&&s.trim()&&s!==t.title)a={title:s};else{if("description"!==e||s===(t.description||""))return;a={description:s}}if(Object.keys(a).length>0)try{await (0,r.r7)((0,r.JU)(l.db,"tsia-custom-lists",t.id),a),c({title:"Επιτυχία",description:"Η λίστα ενημερώθηκε."}),await i()}catch(e){c({variant:"destructive",title:"Σφάλμα",description:"Η ενημέρωση απέτυχε: ".concat(e.message)})}},u=async()=>{if(!o)return c({variant:"destructive",title:"Σφάλμα",description:"Δεν έχετε δικαιώματα για διαγραφή."}),null;if(!confirm('Είστε σίγουροι ότι θέλετε να διαγράψετε τη λίστα "'.concat(t.title,'" και όλα τα περιεχόμενά της; Αυτή η ενέργεια δεν μπορεί να αναιρεθεί.')))return null;try{let e=(0,r.qs)(l.db),s=(0,r.JU)(l.db,"tsia-custom-lists",t.id),a=(0,r.IO)((0,r.hJ)(s,"tsia-items"));(await (0,r.PL)(a)).docs.forEach(t=>e.delete(t.ref)),e.delete(s),await e.commit(),await (0,g.a)("DELETE_LIST",{entityId:t.id,entityType:"custom-list",name:t.title}),c({title:"Επιτυχία",description:"Η λίστα και όλα τα στοιχεία της διαγράφηκαν."}),await i()}catch(e){c({variant:"destructive",title:"Σφάλμα",description:"Η διαγραφή απέτυχε: ".concat(e.message)})}},m=o||!t.isProtected;return(0,a.jsxs)(x.Zb,{children:[(0,a.jsx)(z,{list:t,isOpen:s,canBeModified:m,onToggle:()=>n(t.id),onUpdate:d,onDelete:u}),(0,a.jsx)(C.UQ,{type:"single",collapsible:!0,value:s?t.id:"",children:(0,a.jsx)(C.Qd,{value:t.id,className:"border-none",children:(0,a.jsx)(C.vF,{className:"px-4 pt-0 border-t",children:(0,a.jsxs)("div",{className:"space-y-4 pt-4",children:[m&&(0,a.jsx)(L,{listId:t.id,hasCode:t.hasCode,fetchAllLists:i}),(0,a.jsx)(T,{items:t.items,listId:t.id,hasCode:t.hasCode,canBeModified:m,fetchAllLists:i})]})})})})]},t.id)}var B=s(54817),D=s(9768),F=s(83014),J=s(89277),V=s(31590);function M(){let[e,t]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0),[o,c]=(0,i.useState)(""),[d,m]=(0,i.useState)([]),{toast:x}=(0,j.pm)(),h=(0,i.useCallback)(async()=>{n(!0);let e=(0,r.IO)((0,r.hJ)(l.db,"tsia-custom-lists"),(0,r.Xo)("title","asc"));try{let s=(await (0,r.PL)(e)).docs.map(async e=>{let t=e.data(),s={id:e.id,title:t.title,description:t.description,hasCode:t.hasCode,isProtected:t.isProtected,items:[],createdAt:t.createdAt},a=(0,r.IO)((0,r.hJ)(e.ref,"tsia-items"),(0,r.Xo)("value","asc")),n=await (0,r.PL)(a);return s.items=n.docs.map(e=>({id:e.id,...e.data()})),s}),a=await Promise.all(s);t(a)}catch(e){console.error("Error fetching custom lists:",e),x({variant:"destructive",title:"Σφάλμα",description:"Η φόρτωση των λιστών απέτυχε."})}finally{n(!1)}},[x]);(0,i.useEffect)(()=>{h()},[h]);let v=e.filter(e=>e.title.toLowerCase().includes(o.toLowerCase())||e.description&&e.description.toLowerCase().includes(o.toLowerCase())),g=e=>{m(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},N=t=>{t?m(e.map(e=>e.id)):m([])},w=t=>{"csv"===t?(0,J.m1)(e.flatMap(e=>e.items.map(t=>({list_title:e.title,list_id:e.id,item_id:t.id,code:t.code,value:t.value}))),"custom-lists"):(0,J.rb)(e,"custom-lists")};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(y,{fetchAllLists:h}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Υπάρχουσες Λίστες"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(B.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,a.jsx)(f.I,{type:"search",placeholder:"Αναζήτηση σε απλές λίστες...",className:"pl-10 w-full md:w-80",value:o,onChange:e=>c(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(V.h_,{children:[(0,a.jsx)(V.$F,{asChild:!0,children:(0,a.jsx)(u.z,{variant:"outline",children:"Εξαγωγή"})}),(0,a.jsxs)(V.AW,{children:[(0,a.jsx)(V.Xi,{onClick:()=>w("csv"),children:"Εξαγωγή σε Excel (CSV)"}),(0,a.jsx)(V.Xi,{onClick:()=>w("txt"),children:"Εξαγωγή σε TXT"})]})]}),(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>N(!0),children:[(0,a.jsx)(D.Z,{className:"mr-2 h-4 w-4"}),"Ανάπτυξη Όλων"]}),(0,a.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>N(!1),children:[(0,a.jsx)(F.Z,{className:"mr-2 h-4 w-4"}),"Σύμπτυξη Όλων"]})]})]}),s?(0,a.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,a.jsx)(p.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(0,a.jsx)("div",{className:"w-full space-y-2",children:v.length>0?v.map(e=>(0,a.jsx)(U,{list:e,isOpen:d.includes(e.id),onToggle:g,fetchAllLists:h},"".concat(e.id,"-").concat(e.items.length))):(0,a.jsx)("p",{className:"text-center py-8 text-muted-foreground",children:"Δεν βρέθηκαν λίστες."})})]})]})}var X=s(22584),Y=s(27800);async function H(e){let t=e.get("file"),s=e.get("listName");if(!t||!s)throw Error("File and list name are required.");let a={totalRows:0,unitsCreated:0,errors:[]},n=await t.arrayBuffer(),i=Y.ij(n,{type:"buffer"}),o=i.SheetNames[0],c=i.Sheets[o],d=Y.P6.sheet_to_json(c);a.totalRows=d.length;let u=(0,r.qs)(l.db),m=0,f=(0,r.hJ)(l.db,"tsia-complex-entities");for(let e=0;e<d.length;e++){let t=d[e],n=e+2;try{if(0===Object.keys(t).length){a.errors.push({rowData:t,message:"Empty row.",row:n});continue}let e=(0,r.JU)(f),i={...t,type:s,createdAt:(0,r.Bt)()};u.set(e,i),m++,a.unitsCreated++,m>=400&&(await u.commit(),console.log("Committed a batch of ".concat(m," documents.")),u=(0,r.qs)(l.db),m=0)}catch(e){a.errors.push({rowData:t,message:e.message,row:n})}}return m>0&&(await u.commit(),console.log("Committed final batch of ".concat(m," documents."))),a}var Q=s(2128),K=s(17252),G=s.n(K),q=s(57434),W=s(91612),$=s(22946),ee=s(23879),et=s(33514),es=s(54175),ea=s(47304);function en(e){var t;let{columns:s,data:n,isLoading:r,nextPage:l,prevPage:o,canGoNext:c,canGoPrev:d,page:m,totalCount:f,pageSize:x,activeFilters:h,initialDataLoaded:j}=e,[v,g]=(0,i.useState)([]),N=(0,et.b7)({data:n,columns:s,getCoreRowModel:(0,es.sC)(),onSortingChange:g,getSortedRowModel:(0,es.tj)(),state:{sorting:v},manualPagination:!0,manualSorting:!0});return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(ea.iA,{children:[(0,a.jsx)(ea.xD,{children:N.getHeaderGroups().map(e=>(0,a.jsx)(ea.SC,{children:e.headers.map(e=>(0,a.jsx)(ea.ss,{children:e.isPlaceholder?null:(0,et.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(ea.RM,{children:r&&!j?(0,a.jsx)(ea.SC,{children:(0,a.jsx)(ea.pj,{colSpan:s.length,className:"h-24 text-center",children:(0,a.jsx)(p.Z,{className:"h-6 w-6 animate-spin mx-auto"})})}):(null===(t=N.getRowModel().rows)||void 0===t?void 0:t.length)>0?N.getRowModel().rows.map(e=>(0,a.jsx)(ea.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,a.jsx)(ea.pj,{children:(0,et.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(ea.SC,{children:(0,a.jsx)(ea.pj,{colSpan:s.length,className:"h-24 text-center",children:(0,a.jsx)(()=>{if(!j&&r)return(0,a.jsx)("span",{children:"Φόρτωση..."});let e=Object.entries(h).filter(e=>{let[,t]=e;return t});if(e.length>0&&0===n.length){let[t,s]=e[0],n='Δεν βρέθηκαν αποτελέσματα για το φίλτρο "'.concat(t,'" με τιμή "').concat(s,'" σε αυτή τη σελίδα (').concat(m,"/").concat(null!==f?Math.ceil(f/x):0,").");return c&&(n+=' Παρακαλώ, πατήστε "Επόμενη" για να ελέγξετε τις υπόλοιπες σελίδες.'),(0,a.jsx)("span",{children:n})}return 0===f?(0,a.jsx)("span",{children:"Δεν υπάρχουν εγγραφές σε αυτή τη λίστα."}):(0,a.jsx)("span",{children:"Δεν βρέθηκαν αποτελέσματα."})},{})})})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:null!==f?"Σελίδα ".concat(m," από ").concat(Math.ceil(f/x)):"Σελίδα ".concat(m)}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.z,{variant:"outline",size:"sm",onClick:o,disabled:!d||r,children:"Προηγούμενη"}),(0,a.jsx)(u.z,{variant:"outline",size:"sm",onClick:l,disabled:!c||r,children:"Επόμενη"})]})]})]})}let ei=["Οικισμοί","Δημοτικές/Τοπικές Κοινότητες","Δημοτικές Ενότητες","Δήμοι","Περιφερειακές ενότητες","Περιφέρειες","Αποκεντρωμένες Διοικήσεις","Μεγάλες γεωγραφικές ενότητες"];function er(e){let{query:t,refine:s}=(0,q.l)(e);return(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)(B.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,a.jsx)(f.I,{type:"search",placeholder:"Αναζήτηση σε όλα τα πεδία...",className:"pl-10 w-full",value:t,onChange:e=>s(e.target.value),autoFocus:!0})]})}function el(e){var t,s;let{onHitsChange:n}=e,{hits:r,showMore:l,isLastPage:o,results:c}=(0,W.a)();(0,i.useEffect)(()=>{n(r)},[r,n]);let d=i.useMemo(()=>{if(!r||0===r.length)return ei.map(e=>({accessorKey:e,header:e}));let e=Object.keys(r[0]).filter(e=>!["objectID","_highlightResult","type","createdAt","id","uniqueKey"].includes(e));return e.sort((e,t)=>{let s=ei.indexOf(e),a=ei.indexOf(t);return -1===s&&-1===a?e.localeCompare(t):-1===s?1:-1===a?-1:s-a}),e.map(e=>({accessorKey:e,header:e,cell:t=>{var s,n;let{row:i}=t,r=(null===(n=i.original._highlightResult)||void 0===n?void 0:null===(s=n[e])||void 0===s?void 0:s.value)||i.original[e];return(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:r||""}})}}))},[r]);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(en,{columns:d,data:r,isLoading:!1,totalCount:null!==(t=null==c?void 0:c.nbHits)&&void 0!==t?t:0,pageSize:null!==(s=null==c?void 0:c.hitsPerPage)&&void 0!==s?s:20,page:(null==c?void 0:c.page)?c.page+1:1,canGoNext:!o,canGoPrev:null!=c&&!!c.page&&c.page>0,nextPage:l,prevPage:()=>{},activeFilters:{},initialDataLoaded:!0}),!o&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(u.z,{onClick:l,variant:"outline",children:"Φόρτωση Περισσότερων"})})]})}function eo(e){let{indexName:t,listType:s,onHitsChange:n}=e,r=(0,i.useMemo)(()=>G()("L7A6U4CQEB","eb57b9fae1fde85c9af4a45059e2f86a"),[]);return t?(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)($.p,{searchClient:r,indexName:t,children:[(0,a.jsx)(ee.T,{facetFilters:["type:".concat(s)]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsx)(er,{}),(0,a.jsx)(el,{onHitsChange:n})]})]})}):(0,a.jsxs)("div",{className:"text-destructive-foreground bg-destructive border border-destructive p-4 rounded-md",children:[(0,a.jsx)("strong",{children:"Σφάλμα Ρύθμισης Algolia:"})," Οι μεταβλητές περιβάλλοντος για το Algolia δεν έχουν ρυθμιστεί σωστά. Παρακαλώ, ελέγξτε τα `NEXT_PUBLIC_ALGOLIA_APP_ID` και `NEXT_PUBLIC_ALGOLIA_SEARCH_ONLY_API_KEY` στο `.env.local` αρχείο σας."]})}async function ec(){return(await (0,r.PL)((0,r.IO)((0,r.hJ)(l.db,"tsia-list-types"),(0,r.Xo)("name")))).docs.map(e=>e.data().name)}function ed(){let{toast:e}=(0,j.pm)(),[t,s]=i.useState([]),[n,r]=i.useState(!0),[l,o]=i.useState(""),[c,d]=i.useState(!1),[m,h]=i.useState(null),[v,g]=i.useState(""),[N,w]=i.useState([]);i.useEffect(()=>{(async function(){r(!0),s(await ec()),r(!1)})()},[]),i.useEffect(()=>{if(!n&&t.length>0&&!l){let e="Διοικητική Διαίρεση Ελλάδας";t.includes(e)?o(e):t[0]&&o(t[0])}},[n,t,l]);let b=async()=>{if(!m||!v.trim()){e({variant:"destructive",title:"Σφάλμα",description:"Παρακαλώ δώστε όνομα λίστας και επιλέξτε ένα αρχείο."});return}d(!0),e({title:"Η εισαγωγή ξεκίνησε",description:"Η λίστα σας επεξεργάζεται στο παρασκήνιο. Μπορείτε να συνεχίσετε την εργασία σας."});try{let t=new FormData;t.append("file",m),t.append("listName",v);let n=await H(t);n.errors.length>0?e({variant:"destructive",title:"Η εισαγωγή ολοκληρώθηκε με ".concat(n.errors.length," σφάλματα"),description:"Το αρχείο καταγραφής είναι έτοιμο για λήψη.",duration:1e4,action:(0,a.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>{(0,J.m1)(n.errors.map(e=>({row:e.row,...e.rowData,error:e.message})),"".concat(v,"-import-errors"))},children:"Λήψη"})}):e({title:"Επιτυχής Εισαγωγή",description:'Η λίστα "'.concat(v,'" δημιουργήθηκε με ').concat(n.unitsCreated," εγγραφές.")}),g(""),h(null);let i=document.getElementById("import-file-input");i&&(i.value="");let r=await ec();s(r),o(v)}catch(t){console.error("Import failed:",t),e({variant:"destructive",title:"Η εισαγωγή απέτυχε",description:t.message||"Υπήρξε ένα απρόβλεπτο σφάλμα."})}finally{d(!1)}},y=e=>{let t=N.map(e=>{let{_highlightResult:t,...s}=e;return s});"csv"===e?(0,J.m1)(t,l):(0,J.Rk)(t,l)},C=i.useCallback(e=>{w(e)},[]);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsx)(x.ll,{children:"Εισαγωγή Σύνθετης Λίστας"}),(0,a.jsx)(x.SZ,{children:"Ανεβάστε ένα αρχείο .xlsx ή .csv για μαζική εισαγωγή δεδομένων. Η πρώτη γραμμή πρέπει να περιέχει τις επικεφαλίδες."})]}),(0,a.jsxs)(x.aY,{className:"flex items-center gap-4",children:[(0,a.jsx)(f.I,{placeholder:"Όνομα Νέας Λίστας...",className:"max-w-xs",value:v,onChange:e=>g(e.target.value),disabled:c}),(0,a.jsx)(f.I,{id:"import-file-input",type:"file",className:"max-w-xs",onChange:e=>{e.target.files&&e.target.files.length>0&&h(e.target.files[0])},accept:".xlsx, .csv",disabled:!v.trim()||c}),(0,a.jsxs)(u.z,{onClick:b,disabled:!m||!v.trim()||c,children:[c?(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(X.Z,{className:"mr-2 h-4 w-4"}),c?"Γίνεται Εισαγωγή...":"Έναρξη Εισαγωγής"]})]})]}),(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(x.ll,{children:"Κατάλογος Οντοτήτων"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>y("csv"),disabled:0===N.length,children:"Εξαγωγή CSV"}),(0,a.jsx)(u.z,{variant:"outline",size:"sm",onClick:()=>y("json"),disabled:0===N.length,children:"Εξαγωγή JSON"})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(Q.Ph,{onValueChange:o,value:l,children:[(0,a.jsx)(Q.i4,{className:"w-full md:w-[350px]",children:(0,a.jsx)(Q.ki,{placeholder:n?"Φόρτωση λιστών...":"Επιλέξτε λίστα...",children:n?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 animate-spin"})," ",(0,a.jsx)("span",{children:"Φόρτωση..."})]}):l||"Επιλέξτε λίστα..."})}),(0,a.jsx)(Q.Bw,{children:n?(0,a.jsx)("div",{className:"flex items-center justify-center p-2",children:(0,a.jsx)(p.Z,{className:"h-4 w-4 animate-spin"})}):t.length>0?t.map(e=>(0,a.jsx)(Q.Ql,{value:e,children:e},e)):(0,a.jsx)("p",{className:"p-2 text-xs text-muted-foreground",children:"Δεν βρέθηκαν λίστες."})})]})})]}),(0,a.jsx)(x.aY,{children:l?(0,a.jsx)(eo,{indexName:"tsia-complex-entities",listType:l,onHitsChange:C}):(0,a.jsx)("div",{className:"text-center py-10 text-muted-foreground",children:"Παρακαλώ επιλέξτε μια λίστα για να δείτε τα δεδομένα."})})]})]})}function eu(){return(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Προσαρμοσμένες Λίστες & Κατάλογοι"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Διαχειριστείτε τις λίστες επιλογών και τους καταλόγους σύνθετων οντοτήτων που χρησιμοποιούνται σε όλη την εφαρμογή."})]}),(0,a.jsxs)(n.mQ,{defaultValue:"simple-lists",className:"w-full",children:[(0,a.jsxs)(n.dr,{className:"grid w-full grid-cols-2 max-w-sm",children:[(0,a.jsx)(n.SP,{value:"simple-lists",children:"Απλές Λίστες"}),(0,a.jsx)(n.SP,{value:"complex-entities",children:"Σύνθετες Οντότητες"})]}),(0,a.jsx)(n.nU,{value:"simple-lists",className:"space-y-6 mt-4",children:(0,a.jsx)(M,{})}),(0,a.jsx)(n.nU,{value:"complex-entities",className:"space-y-6 mt-4",children:(0,a.jsx)(ed,{})})]})]})}},35265:function(e,t,s){"use strict";s.d(t,{Qd:function(){return c},UQ:function(){return o},o4:function(){return d},vF:function(){return u}});var a=s(57437),n=s(2265),i=s(64756),r=s(42421),l=s(49354);let o=i.fC,c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i.ck,{ref:t,className:(0,l.cn)("border-b",s),...n})});c.displayName="AccordionItem";let d=n.forwardRef((e,t)=>{let{className:s,children:n,...o}=e;return(0,a.jsx)(i.h4,{className:"flex",children:(0,a.jsxs)(i.xz,{ref:t,className:(0,l.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...o,children:[n,(0,a.jsx)(r.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});d.displayName=i.xz.displayName;let u=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsx)(i.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,a.jsx)("div",{className:(0,l.cn)("pb-4 pt-0",s),children:n})})});u.displayName=i.VY.displayName},48185:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return r},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var a=s(57437),n=s(2265),i=s(49354);let r=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});r.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...n})});u.displayName="CardFooter"},31590:function(e,t,s){"use strict";s.d(t,{$F:function(){return u},AW:function(){return m},Ju:function(){return x},VD:function(){return p},Xi:function(){return f},h_:function(){return d}});var a=s(57437),n=s(2265),i=s(81622),r=s(87592),l=s(22468),o=s(28165),c=s(49354);let d=i.fC,u=i.xz;i.ZA,i.Uv,i.Tr,i.Ee,n.forwardRef((e,t)=>{let{className:s,inset:n,children:l,...o}=e;return(0,a.jsxs)(i.fF,{ref:t,className:(0,c.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",s),...o,children:[l,(0,a.jsx)(r.Z,{className:"ml-auto"})]})}).displayName=i.fF.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i.tu,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})}).displayName=i.tu.displayName;let m=n.forwardRef((e,t)=>{let{className:s,sideOffset:n=4,...r}=e;return(0,a.jsx)(i.Uv,{children:(0,a.jsx)(i.VY,{ref:t,sideOffset:n,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})})});m.displayName=i.VY.displayName;let f=n.forwardRef((e,t)=>{let{className:s,inset:n,...r}=e;return(0,a.jsx)(i.ck,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",s),...r})});f.displayName=i.ck.displayName,n.forwardRef((e,t)=>{let{className:s,children:n,checked:r,...o}=e;return(0,a.jsxs)(i.oC,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.wU,{children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})}),n]})}).displayName=i.oC.displayName,n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsxs)(i.Rk,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.wU,{children:(0,a.jsx)(o.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=i.Rk.displayName;let x=n.forwardRef((e,t)=>{let{className:s,inset:n,...r}=e;return(0,a.jsx)(i.__,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",s),...r})});x.displayName=i.__.displayName;let p=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...n})});p.displayName=i.Z0.displayName},47304:function(e,t,s){"use strict";s.d(t,{RM:function(){return o},SC:function(){return c},iA:function(){return r},pj:function(){return u},ss:function(){return d},xD:function(){return l}});var a=s(57437),n=s(2265),i=s(49354);let r=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",s),...n})})});r.displayName="Table";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",s),...n})});l.displayName="TableHeader";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",s),...n})});o.displayName="TableBody",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...n})}).displayName="TableFooter";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted data-[state=selected]:bg-muted",s),...n})});c.displayName="TableRow";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...n})});d.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...n})});u.displayName="TableCell",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",s),...n})}).displayName="TableCaption"},86864:function(e,t,s){"use strict";s.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return l},nU:function(){return d}});var a=s(57437),n=s(2265),i=s(62447),r=s(49354);let l=i.fC,o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i.aV,{ref:t,className:(0,r.cn)("inline-flex h-auto items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...n})});o.displayName=i.aV.displayName;let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i.xz,{ref:t,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm hover:bg-[#e46767]/10",s),...n})});c.displayName=i.xz.displayName;let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(i.VY,{ref:t,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...n})});d.displayName=i.VY.displayName},4919:function(e,t,s){"use strict";s.d(t,{g:function(){return r}});var a=s(57437),n=s(2265),i=s(49354);let r=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});r.displayName="Textarea"},87786:function(e,t,s){"use strict";s.d(t,{H:function(){return c},a:function(){return d}});var a=s(57437),n=s(2265),i=s(70303),r=s(89506),l=s(31721);let o=(0,n.createContext)({user:void 0,role:null,isLoading:!0,isAdmin:!1,isEditor:!1});function c(e){let{children:t}=e,[s,c]=(0,n.useState)(void 0),[d,u]=(0,n.useState)(null),[m,f]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=(0,i.Aj)(r.I8,async e=>{if(e){c(e);try{let t=await (0,l.zl)(e);u(t)}catch(e){console.error("Error finding or creating user document:",e),u(null)}finally{f(!1)}}else c(null),u(null),f(!1)});return()=>e()},[]),(0,a.jsx)(o.Provider,{value:{user:s,role:d,isLoading:m,isAdmin:"admin"===d,isEditor:"admin"===d||"editor"===d},children:t})}let d=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},89277:function(e,t,s){"use strict";function a(e,t){let s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}function n(e,t){if(!e||0===e.length){console.warn("Export aborted: No data provided.");return}a(new Blob([JSON.stringify(e,(e,t)=>t&&"object"==typeof t&&t.hasOwnProperty("seconds")&&t.hasOwnProperty("nanoseconds")?new Date(1e3*t.seconds+t.nanoseconds/1e6).toISOString():t,2)],{type:"application/json"}),"".concat(t,".json"))}function i(e,t){if(!e||0===e.length){console.warn("Export to CSV aborted: No data provided.");return}a(new Blob(["\uFEFF"+function(e){if(!e||0===e.length)return"";let t=Object.keys(e[0]),s=e.map(e=>t.map(t=>{let s=e[t];if(null==s)return"";let a=String(s).replace(/"/g,'""');return/[",;\n]/.test(a)?'"'.concat(a,'"'):a}).join(";"));return[t.join(";"),...s].join("\n")}(e)],{type:"text/csv;charset=utf-8;"}),"".concat(t,".csv"))}function r(e,t){let s;if(!e||0===e.length){console.warn("Export to TXT aborted: No data provided.");return}a(new Blob([(s="",e.forEach(e=>{s+="--- ".concat(e.title.toUpperCase()," ---\n"),e.description&&(s+="".concat(e.description,"\n")),s+="\n",e.items.forEach(e=>{e.code?s+="".concat(e.code,"	").concat(e.value,"\n"):s+="".concat(e.value,"\n")}),s+="\n"}),s)],{type:"text/plain;charset=utf-8;"}),"".concat(t,".txt"))}s.d(t,{Rk:function(){return n},m1:function(){return i},rb:function(){return r}})},18473:function(e,t,s){"use strict";s.d(t,{a:function(){return i}});var a=s(69842),n=s(89506);let i=async(e,t)=>{try{let s=n.I8.currentUser;if(!s){console.warn("Cannot log activity: User is not authenticated.");return}let i={action:e,...t,userId:s.uid,userEmail:s.email,timestamp:(0,a.Bt)()};await (0,a.ET)((0,a.hJ)(n.db,"auditLogs"),i)}catch(e){console.error("Failed to write to audit log:",e)}}}},function(e){e.O(0,[3609,9015,1425,8502,1080,5693,5510,2962,7853,5590,8275,8198,8615,5077,422,2971,7023,1744],function(){return e(e.s=29938)}),_N_E=e.O()}]);