(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[586],{87365:function(e,t,r){Promise.resolve().then(r.bind(r,55027))},95137:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(78030).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},96273:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(78030).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},16463:function(e,t,r){"use strict";var n=r(71169);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},55027:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var n=r(57437),s=r(2265),i=r(16463),a=r(69842),o=r(89506),l=r(39343),d=r(31014),c=r(86763),u=r(3274),f=r(95137),x=r(48185),m=r(93363),p=r(89733),h=r(3187),j=r(77209),g=r(4919),b=r(6460);let v=e=>{if(!e)return"-";let t=e instanceof a.EK?e.toDate():e;return(0,b.WU)(t,"dd/MM/yyyy")};function y(e){let{form:t,building:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(x.Ol,{children:[(0,n.jsxs)(x.ll,{children:["Κτίριο: ",r.address]}),(0,n.jsxs)(x.SZ,{children:["Τύπος: ",r.type," | Ημερομηνία Δημιουργίας:"," ",v(r.createdAt)]})]}),(0,n.jsxs)(x.aY,{className:"grid md:grid-cols-2 gap-6 pt-6",children:[(0,n.jsx)(m.Wi,{control:t.control,name:"address",render:e=>{let{field:t}=e;return(0,n.jsxs)(m.xJ,{children:[(0,n.jsx)(m.lX,{children:"Διεύθυνση"}),(0,n.jsx)(m.NI,{children:(0,n.jsx)(j.I,{...t})}),(0,n.jsx)(m.zG,{})]})}}),(0,n.jsx)(m.Wi,{control:t.control,name:"type",render:e=>{let{field:t}=e;return(0,n.jsxs)(m.xJ,{children:[(0,n.jsx)(m.lX,{children:"Τύπος"}),(0,n.jsx)(m.NI,{children:(0,n.jsx)(j.I,{...t})}),(0,n.jsx)(m.zG,{})]})}}),(0,n.jsx)(m.Wi,{control:t.control,name:"constructionYear",render:e=>{let{field:t}=e;return(0,n.jsxs)(m.xJ,{children:[(0,n.jsx)(m.lX,{children:"Έτος Κατασκευής"}),(0,n.jsx)(m.NI,{children:(0,n.jsx)(j.I,{type:"number",...t,onChange:e=>t.onChange(parseInt(e.target.value,10)||"")})}),(0,n.jsx)(m.zG,{})]})}}),(0,n.jsx)(m.Wi,{control:t.control,name:"photoUrl",render:e=>{let{field:t}=e;return(0,n.jsxs)(m.xJ,{children:[(0,n.jsx)(m.lX,{children:"URL Φωτογραφίας"}),(0,n.jsx)(m.NI,{children:(0,n.jsx)(j.I,{...t})}),(0,n.jsx)(m.zG,{})]})}}),(0,n.jsx)("div",{className:"md:col-span-2",children:(0,n.jsx)(m.Wi,{control:t.control,name:"description",render:e=>{let{field:t}=e;return(0,n.jsxs)(m.xJ,{children:[(0,n.jsx)(m.lX,{children:"Περιγραφή"}),(0,n.jsx)(m.NI,{children:(0,n.jsx)(g.g,{...t})}),(0,n.jsx)(m.zG,{})]})}})})]})]})}var N=r(47304),I=r(96273),w=r(18473),S=r(87786),R=r(59917),C=r(54662);let T=R.Ry({level:R.Z_().min(1,{message:"Το επίπεδο είναι υποχρεωτικό."}),description:R.Z_().optional(),floorPlanUrl:R.Z_().url({message:"Το URL της κάτοψης δεν είναι έγκυρο."}).or(R.i0("")).optional()});function z(e){let{open:t,onOpenChange:r,form:s,onSubmit:i,isSubmitting:a}=e;return(0,n.jsx)(C.Vq,{open:t,onOpenChange:r,children:(0,n.jsxs)(C.cZ,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(C.fK,{children:[(0,n.jsx)(C.$N,{children:"Προσθήκη Νέου Ορόφου"}),(0,n.jsx)(C.Be,{children:"Συμπληρώστε τις πληροφορίες για να προσθέσετε έναν νέο όροφο στο κτίριο."})]}),(0,n.jsx)(m.l0,{...s,children:(0,n.jsxs)("form",{onSubmit:i,className:"grid gap-4 py-4",children:[(0,n.jsx)(m.Wi,{control:s.control,name:"level",render:e=>{let{field:t}=e;return(0,n.jsxs)(m.xJ,{children:[(0,n.jsx)(m.lX,{children:"Επίπεδο Ορόφου"}),(0,n.jsx)(m.NI,{children:(0,n.jsx)(j.I,{placeholder:"π.χ. 1, 0, -1, Ισόγειο",...t})}),(0,n.jsx)(m.zG,{})]})}}),(0,n.jsx)(m.Wi,{control:s.control,name:"description",render:e=>{let{field:t}=e;return(0,n.jsxs)(m.xJ,{children:[(0,n.jsx)(m.lX,{children:"Περιγραφή (Προαιρετικό)"}),(0,n.jsx)(m.NI,{children:(0,n.jsx)(j.I,{placeholder:"π.χ. Γραφεία εταιρείας",...t})}),(0,n.jsx)(m.zG,{})]})}}),(0,n.jsx)(m.Wi,{control:s.control,name:"floorPlanUrl",render:e=>{let{field:t}=e;return(0,n.jsxs)(m.xJ,{children:[(0,n.jsx)(m.lX,{children:"URL Κάτοψης (Προαιρετικό)"}),(0,n.jsx)(m.NI,{children:(0,n.jsx)(j.I,{placeholder:"https://example.com/plan.pdf",...t})}),(0,n.jsx)(m.zG,{})]})}}),(0,n.jsxs)(C.cN,{children:[(0,n.jsx)(C.GG,{asChild:!0,children:(0,n.jsx)(p.z,{type:"button",variant:"outline",disabled:a,children:"Ακύρωση"})}),(0,n.jsxs)(p.z,{type:"submit",disabled:a,children:[a&&(0,n.jsx)(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Προσθήκη Ορόφου"]})]})]})})]})})}function E(e){let{building:t}=e,r=(0,i.useRouter)(),{isEditor:f}=(0,S.a)(),{toast:m}=(0,c.pm)(),[h,j]=(0,s.useState)([]),[g,v]=(0,s.useState)(!0),[y,R]=(0,s.useState)(!1),[C,E]=(0,s.useState)(!1),_=(0,l.cI)({resolver:(0,d.F)(T),defaultValues:{level:"",description:"",floorPlanUrl:""}});(0,s.useEffect)(()=>{if(!t.id)return;v(!0);let e=(0,a.IO)((0,a.hJ)(o.db,"floors"),(0,a.ar)("buildingId","==",t.id),(0,a.Xo)("level","asc")),r=(0,a.cf)(e,e=>{j(e.docs.map(e=>({id:e.id,...e.data()}))),v(!1)},e=>{console.error("Error fetching floors: ",e),m({variant:"destructive",title:"Σφάλμα",description:"Δεν ήταν δυνατή η φόρτωση των ορόφων."}),v(!1)});return()=>r()},[t.id,m]);let A=e=>{E(e),e||_.reset()},k=async e=>{if(!t.projectId||!t.originalId){m({variant:"destructive",title:"Σφάλμα",description:"Δεν βρέθηκε το γονικό κτίριο."});return}R(!0);try{var r;let n=(0,a.qs)(o.db),s=(0,a.JU)((0,a.hJ)(o.db,"projects",t.projectId,"buildings",t.originalId,"floors")),i=(0,a.JU)((0,a.hJ)(o.db,"floors")),l={level:e.level,description:e.description||"",floorPlanUrl:(null===(r=e.floorPlanUrl)||void 0===r?void 0:r.trim())?e.floorPlanUrl:null};n.set(s,{...l,topLevelId:i.id,createdAt:(0,a.Bt)()}),n.set(i,{...l,buildingId:t.id,originalId:s.id,createdAt:(0,a.Bt)()}),await n.commit(),m({title:"Επιτυχία",description:"Ο όροφος προστέθηκε."}),await (0,w.a)("CREATE_FLOOR",{entityId:i.id,entityType:"floor",details:l,projectId:t.projectId}),A(!1)}catch(e){console.error("Error adding floor: ",e),m({variant:"destructive",title:"Σφάλμα",description:"Δεν ήταν δυνατή η προσθήκη του ορόφου."})}finally{R(!1)}},U=e=>{r.push("/floors/".concat(e))},Z=e=>e?(0,b.WU)(e.toDate(),"dd/MM/yyyy"):"N/A";return(0,n.jsxs)(x.Zb,{children:[(0,n.jsx)(x.Ol,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(x.ll,{children:"Όροφοι του Κτιρίου"}),f&&(0,n.jsxs)(p.z,{size:"sm",onClick:()=>A(!0),children:[(0,n.jsx)(I.Z,{className:"mr-2"}),"Νέος Όροφος"]})]})}),(0,n.jsx)(x.aY,{children:g?(0,n.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,n.jsx)(u.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):h.length>0?(0,n.jsxs)(N.iA,{children:[(0,n.jsx)(N.xD,{children:(0,n.jsxs)(N.SC,{children:[(0,n.jsx)(N.ss,{children:"Επίπεδο"}),(0,n.jsx)(N.ss,{children:"Περιγραφή"}),(0,n.jsx)(N.ss,{children:"Ημ/νία Δημιουργίας"})]})}),(0,n.jsx)(N.RM,{children:h.map(e=>(0,n.jsxs)(N.SC,{onClick:()=>U(e.id),className:"cursor-pointer",children:[(0,n.jsx)(N.pj,{className:"font-medium",children:e.level}),(0,n.jsx)(N.pj,{className:"text-muted-foreground",children:e.description||"N/A"}),(0,n.jsx)(N.pj,{children:Z(e.createdAt)})]},e.id))})]}):(0,n.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"Δεν βρέθηκαν όροφοι για αυτό το κτίριο."})}),(0,n.jsx)(z,{open:C,onOpenChange:A,form:_,onSubmit:_.handleSubmit(k),isSubmitting:y})]})}function _(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),{isEditor:r}=(0,S.a)(),j=e.id,[g,b]=(0,s.useState)(null),[v,N]=(0,s.useState)(!0),[I,R]=(0,s.useState)(!1),{toast:C}=(0,c.pm)(),T=(0,l.cI)({resolver:(0,d.F)(h.h),defaultValues:{address:"",type:"",description:"",photoUrl:"",constructionYear:void 0,identifier:""}});(0,s.useEffect)(()=>{if(!j)return;let e=(0,a.JU)(o.db,"buildings",j),r=(0,a.cf)(e,e=>{if(e.exists()){let t={id:e.id,...e.data()};b(t),T.reset({address:t.address,type:t.type,constructionYear:t.constructionYear,description:t.description||"",photoUrl:t.photoUrl||"",identifier:t.identifier||""}),N(!1)}else C({variant:"destructive",title:"Σφάλμα",description:"Δεν βρέθηκε το κτίριο."}),t.push("/projects")},e=>{console.error("Error fetching building:",e),N(!1)});return()=>r()},[j,t,C,T]);let z=async e=>{if(!g)return;R(!0);let{id:t,tags:r,...n}=e;try{await (0,a.r7)((0,a.JU)(o.db,"buildings",g.id),n),C({title:"Επιτυχία",description:"Οι αλλαγές στο κτίριο αποθηκεύτηκαν."}),await (0,w.a)("UPDATE_BUILDING",{entityId:g.id,entityType:"building",changes:n,projectId:g.projectId}),T.reset(e)}catch(e){C({variant:"destructive",title:"Σφάλμα",description:"Η αποθήκευση απέτυχε: ".concat(e.message)})}finally{R(!1)}};return v?(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,n.jsx)(u.Z,{className:"h-16 w-16 animate-spin text-muted-foreground"})}):g?(0,n.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)(p.z,{variant:"outline",size:"sm",onClick:()=>t.back(),children:[(0,n.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Επιστροφή"]}),r&&(0,n.jsxs)(p.z,{type:"submit",form:"building-details-form",disabled:I||!T.formState.isDirty,children:[I&&(0,n.jsx)(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Αποθήκευση"]})]}),(0,n.jsx)(m.l0,{...T,children:(0,n.jsx)("form",{id:"building-details-form",onSubmit:T.handleSubmit(z),children:(0,n.jsx)(x.Zb,{children:(0,n.jsx)(y,{form:T,building:g})})})}),(0,n.jsx)(E,{building:g})]}):(0,n.jsx)("p",{className:"text-center",children:"Δεν βρέθηκε κτίριο."})}},3187:function(e,t,r){"use strict";r.d(t,{$:function(){return f},h:function(){return u}});var n=r(57437),s=r(59917),i=r(54662),a=r(93363),o=r(77209),l=r(4919),d=r(89733),c=r(3274);let u=s.Ry({id:s.Z_().optional(),address:s.Z_().min(1,{message:"Η διεύθυνση είναι υποχρεωτική."}),type:s.Z_().min(1,{message:"Ο τύπος είναι υποχρεωτικός."}),description:s.Z_().optional(),photoUrl:s.Z_().url({message:"Το URL της φωτογραφίας δεν είναι έγκυρο."}).or(s.i0("")),floorsCount:s.oQ.number().int().positive().optional(),constructionYear:s.oQ.number().int().min(1900).max(new Date().getFullYear()+5).optional(),tags:s.Z_().optional(),identifier:s.Z_().min(1,"Ο κωδικός κτιρίου είναι υποχρεωτικός.")});function f(e){let{open:t,onOpenChange:r,form:s,onSubmit:u,isSubmitting:f,editingBuilding:x}=e;return(0,n.jsx)(i.Vq,{open:t,onOpenChange:r,children:(0,n.jsxs)(i.cZ,{className:"sm:max-w-lg",children:[(0,n.jsxs)(i.fK,{children:[(0,n.jsxs)(i.$N,{children:[x?"Επεξεργασία":"Προσθήκη Νέου"," Κτιρίου"]}),(0,n.jsx)(i.Be,{children:"Συμπληρώστε τις πληροφορίες για το κτίριο του έργου."})]}),(0,n.jsx)(a.l0,{...s,children:(0,n.jsxs)("form",{onSubmit:u,className:"grid max-h-[80vh] gap-4 overflow-y-auto py-4 pr-4",children:[(0,n.jsx)(a.Wi,{control:s.control,name:"identifier",render:e=>{let{field:t}=e;return(0,n.jsxs)(a.xJ,{children:[(0,n.jsx)(a.lX,{children:"Κωδικός Κτιρίου"}),(0,n.jsx)(a.NI,{children:(0,n.jsx)(o.I,{placeholder:"π.χ. Α, Β, W1",...t})}),(0,n.jsx)(a.zG,{})]})}}),(0,n.jsx)(a.Wi,{control:s.control,name:"address",render:e=>{let{field:t}=e;return(0,n.jsxs)(a.xJ,{children:[(0,n.jsx)(a.lX,{children:"Διεύθυνση"}),(0,n.jsx)(a.NI,{children:(0,n.jsx)(o.I,{...t})}),(0,n.jsx)(a.zG,{})]})}}),(0,n.jsx)(a.Wi,{control:s.control,name:"type",render:e=>{let{field:t}=e;return(0,n.jsxs)(a.xJ,{children:[(0,n.jsx)(a.lX,{children:"Τύπος"}),(0,n.jsx)(a.NI,{children:(0,n.jsx)(o.I,{...t})}),(0,n.jsx)(a.zG,{})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(a.Wi,{control:s.control,name:"floorsCount",render:e=>{let{field:t}=e;return(0,n.jsxs)(a.xJ,{children:[(0,n.jsx)(a.lX,{children:"Αρ. Ορόφων"}),(0,n.jsx)(a.NI,{children:(0,n.jsx)(o.I,{type:"number",...t,onChange:e=>t.onChange(""===e.target.value?void 0:Number(e.target.value))})}),(0,n.jsx)(a.zG,{})]})}}),(0,n.jsx)(a.Wi,{control:s.control,name:"constructionYear",render:e=>{let{field:t}=e;return(0,n.jsxs)(a.xJ,{children:[(0,n.jsx)(a.lX,{children:"Έτος Κατασκευής"}),(0,n.jsx)(a.NI,{children:(0,n.jsx)(o.I,{type:"number",...t,onChange:e=>t.onChange(""===e.target.value?void 0:Number(e.target.value))})}),(0,n.jsx)(a.zG,{})]})}})]}),(0,n.jsx)(a.Wi,{control:s.control,name:"photoUrl",render:e=>{let{field:t}=e;return(0,n.jsxs)(a.xJ,{children:[(0,n.jsx)(a.lX,{children:"URL Φωτογραφίας"}),(0,n.jsx)(a.NI,{children:(0,n.jsx)(o.I,{...t})}),(0,n.jsx)(a.zG,{})]})}}),(0,n.jsx)(a.Wi,{control:s.control,name:"tags",render:e=>{let{field:t}=e;return(0,n.jsxs)(a.xJ,{children:[(0,n.jsx)(a.lX,{children:"Tags (με κόμμα)"}),(0,n.jsx)(a.NI,{children:(0,n.jsx)(o.I,{...t})}),(0,n.jsx)(a.zG,{})]})}}),(0,n.jsx)(a.Wi,{control:s.control,name:"description",render:e=>{let{field:t}=e;return(0,n.jsxs)(a.xJ,{children:[(0,n.jsx)(a.lX,{children:"Περιγραφή"}),(0,n.jsx)(a.NI,{children:(0,n.jsx)(l.g,{...t})}),(0,n.jsx)(a.zG,{})]})}}),(0,n.jsxs)(i.cN,{children:[(0,n.jsx)(i.GG,{asChild:!0,children:(0,n.jsx)(d.z,{type:"button",variant:"outline",disabled:f,children:"Ακύρωση"})}),(0,n.jsxs)(d.z,{type:"submit",disabled:f,children:[f&&(0,n.jsx)(c.Z,{className:"mr-2 h-4 w-4 animate-spin"}),x?"Αποθήκευση":"Προσθήκη"]})]})]})})]})})}},89733:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return d}});var n=r(57437),s=r(2265),i=r(71538),a=r(13027),o=r(49354);let l=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",destructive_outline:"border border-input text-destructive hover:bg-destructive/10",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:a,asChild:d=!1,...c}=e,u=d?i.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:s,size:a,className:r})),ref:t,...c})});d.displayName="Button"},48185:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return a},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var n=r(57437),s=r(2265),i=r(49354);let a=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});a.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},54662:function(e,t,r){"use strict";r.d(t,{$N:function(){return h},Be:function(){return j},GG:function(){return u},Vq:function(){return l},cN:function(){return p},cZ:function(){return x},fK:function(){return m},hg:function(){return d}});var n=r(57437),s=r(2265),i=r(13304),a=r(74697),o=r(49354);let l=i.fC,d=i.xz,c=i.h_,u=i.x8,f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(i.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});f.displayName=i.aV.displayName;let x=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,n.jsxs)(c,{children:[(0,n.jsx)(f,{}),(0,n.jsxs)(i.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l,children:[s,(0,n.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(a.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=i.VY.displayName;let m=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};m.displayName="DialogHeader";let p=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};p.displayName="DialogFooter";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(i.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});h.displayName=i.Dx.displayName;let j=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(i.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});j.displayName=i.dk.displayName},93363:function(e,t,r){"use strict";r.d(t,{NI:function(){return h},Wi:function(){return u},l0:function(){return d},lX:function(){return p},pf:function(){return j},xJ:function(){return m},zG:function(){return g}});var n=r(57437),s=r(2265),i=r(71538),a=r(39343),o=r(49354),l=r(70402);let d=a.RV,c=s.createContext({}),u=e=>{let{...t}=e;return(0,n.jsx)(c.Provider,{value:{name:t.name},children:(0,n.jsx)(a.Qr,{...t})})},f=()=>{let e=s.useContext(c),t=s.useContext(x),{getFieldState:r,formState:n}=(0,a.Gc)();if(!e)throw Error("useFormField should be used within <FormField>");let i=r(e.name,n),{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...i}},x=s.createContext({}),m=s.forwardRef((e,t)=>{let{className:r,...i}=e,a=s.useId();return(0,n.jsx)(x.Provider,{value:{id:a},children:(0,n.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",r),...i})})});m.displayName="FormItem";let p=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:i,formItemId:a}=f();return(0,n.jsx)(l._,{ref:t,className:(0,o.cn)(i&&"text-destructive",r),htmlFor:a,...s})});p.displayName="FormLabel";let h=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:a,formDescriptionId:o,formMessageId:l}=f();return(0,n.jsx)(i.g7,{ref:t,id:a,"aria-describedby":s?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!s,...r})});h.displayName="FormControl";let j=s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:i}=f();return(0,n.jsx)("p",{ref:t,id:i,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});j.displayName="FormDescription";let g=s.forwardRef((e,t)=>{var r;let{className:s,children:i,...a}=e,{error:l,formMessageId:d}=f(),c=l?String(null!==(r=null==l?void 0:l.message)&&void 0!==r?r:""):i;return c?(0,n.jsx)("p",{ref:t,id:d,className:(0,o.cn)("text-sm font-medium text-destructive",s),...a,children:c}):null});g.displayName="FormMessage"},77209:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});var n=r(57437),s=r(2265),i=r(49354);let a=s.forwardRef((e,t)=>{let{className:r,type:s,...a}=e;return(0,n.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});a.displayName="Input"},70402:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var n=r(57437),s=r(2265),i=r(38364),a=r(13027),o=r(49354);let l=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(i.f,{ref:t,className:(0,o.cn)(l(),r),...s})});d.displayName=i.f.displayName},47304:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return d},iA:function(){return a},pj:function(){return u},ss:function(){return c},xD:function(){return o}});var n=r(57437),s=r(2265),i=r(49354);let a=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",r),...s})})});a.displayName="Table";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",r),...s})});o.displayName="TableHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",r),...s})});l.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted data-[state=selected]:bg-muted",r),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},4919:function(e,t,r){"use strict";r.d(t,{g:function(){return a}});var n=r(57437),s=r(2265),i=r(49354);let a=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});a.displayName="Textarea"},87786:function(e,t,r){"use strict";r.d(t,{H:function(){return d},a:function(){return c}});var n=r(57437),s=r(2265),i=r(70303),a=r(89506),o=r(31721);let l=(0,s.createContext)({user:void 0,role:null,isLoading:!0,isAdmin:!1,isEditor:!1});function d(e){let{children:t}=e,[r,d]=(0,s.useState)(void 0),[c,u]=(0,s.useState)(null),[f,x]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=(0,i.Aj)(a.I8,async e=>{if(e){d(e);try{let t=await (0,o.zl)(e);u(t)}catch(e){console.error("Error finding or creating user document:",e),u(null)}finally{x(!1)}}else d(null),u(null),x(!1)});return()=>e()},[]),(0,n.jsx)(l.Provider,{value:{user:r,role:c,isLoading:f,isAdmin:"admin"===c,isEditor:"admin"===c||"editor"===c},children:t})}let c=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},86763:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var n=r(2265);let s=0,i=new Map,a=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?a(r):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(d);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},31721:function(e,t,r){"use strict";r.d(t,{CC:function(){return a},gX:function(){return l},hg:function(){return o},rr:function(){return s},zl:function(){return i}}),r(74590);var n=r(58064),s=(0,n.$)("650cf0f3f0bd18aeafc63b5f69071e5de8f11976"),i=(0,n.$)("7040ad050d67ddd3204a1b169328d1d9b63993a9"),a=(0,n.$)("bb940dc7dad8d371ecc54c42ecedc64f64a96fbe"),o=(0,n.$)("1929d9b4a55ccca6fd5c13ec1455093a8c2a1bfa");(0,n.$)("7c1778c43d4bcad59f28beb8c7aeb078136cdc4d"),(0,n.$)("948e70e8c58987240e5319b60bd1d6a596ff2cc9");var l=(0,n.$)("9569bcfade6c590b3d19ca071936f2c3b6bbf4e0")},89506:function(e,t,r){"use strict";r.d(t,{I8:function(){return u},db:function(){return c},tO:function(){return f}});var n=r(15236),s=r(69842),i=r(70303),a=r(57697),o=r(98298);let l={apiKey:"AIzaSyALXvVaqDt2xuX5E8uRIyoBzl9n4WQHLa4",authDomain:"tasia-6f77i.firebaseapp.com",projectId:"tasia-6f77i",storageBucket:"tasia-6f77i.appspot.com",messagingSenderId:"204877276202",appId:"1:204877276202:web:31db4eb5b1c1b7c4078f53",measurementId:r(25566).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID};l&&l.apiKey&&l.projectId||console.error("Firebase configuration is missing. Make sure your environment variables are set up correctly and passed through next.config.js.");let d=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)(l),c=(0,s.ad)(d),u=(0,i.v0)(d),f=(0,a.cF)(d);(0,o.$C)(d),(0,s.ST)(c).then(()=>console.log("Firestore offline persistence enabled.")).catch(e=>{"failed-precondition"==e.code?console.warn("Firestore persistence failed: Multiple tabs open."):"unimplemented"==e.code&&console.warn("Firestore persistence not supported in this browser.")})},18473:function(e,t,r){"use strict";r.d(t,{a:function(){return i}});var n=r(69842),s=r(89506);let i=async(e,t)=>{try{let r=s.I8.currentUser;if(!r){console.warn("Cannot log activity: User is not authenticated.");return}let i={action:e,...t,userId:r.uid,userEmail:r.email,timestamp:(0,n.Bt)()};await (0,n.ET)((0,n.hJ)(s.db,"auditLogs"),i)}catch(e){console.error("Failed to write to audit log:",e)}}},49354:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var n=r(44839),s=r(96164);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}}},function(e){e.O(0,[3609,9015,8502,1080,5693,323,2962,6460,5590,2971,7023,1744],function(){return e(e.s=87365)}),_N_E=e.O()}]);