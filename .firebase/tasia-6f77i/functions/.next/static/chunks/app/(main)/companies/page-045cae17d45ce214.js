(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1948],{8728:function(e,t,n){Promise.resolve().then(n.bind(n,45615))},45615:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(57437),a=n(2265),s=n(93191),o=n(65118),i=n(25524),l=n(69842),c=n(89506),d=n(89733),u=n(47304),f=n(29943),m=n(39343),x=n(31014),p=n(37164),h=n(96273),j=n(54817),g=n(3274),b=n(27422),y=n(6649),N=n(10883),v=n(86763),w=n(48185),I=n(80420),C=n(87138),R=n(89277),E=n(87786),S=n(18473),T=n(59917),_=n(54662),A=n(93363),k=n(77209);let z=T.Ry({name:T.Z_().min(1,{message:"Το όνομα είναι υποχρεωτικό."}),logoUrl:T.Z_().url({message:"Το URL του λογότυπου δεν είναι έγκυρο."}).or(T.i0("")),website:T.Z_().url({message:"Το URL του website δεν είναι έγκυρο."}).or(T.i0("")),contactInfo:T.Ry({email:T.Z_().email({message:"Το email δεν είναι έγκυρο."}).or(T.i0("")),phone:T.Z_().optional(),address:T.Z_().optional(),afm:T.Z_().optional()})});function F(e){let{open:t,onOpenChange:n,form:a,onSubmit:s,isSubmitting:o,editingCompany:i}=e;return(0,r.jsx)(_.Vq,{open:t,onOpenChange:n,children:(0,r.jsxs)(_.cZ,{className:"sm:max-w-md",children:[(0,r.jsx)(_.fK,{children:(0,r.jsxs)(_.$N,{children:[i?"Επεξεργασία":"Προσθήκη Νέας"," Εταιρείας"]})}),(0,r.jsx)(A.l0,{...a,children:(0,r.jsxs)("form",{onSubmit:s,className:"grid gap-4 py-4",children:[(0,r.jsx)(A.Wi,{control:a.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"Όνομα Εταιρείας"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(k.I,{...t})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(A.Wi,{control:a.control,name:"logoUrl",render:e=>{let{field:t}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"URL Λογοτύπου"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(k.I,{...t})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(A.Wi,{control:a.control,name:"website",render:e=>{let{field:t}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"Website"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(k.I,{...t})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(A.Wi,{control:a.control,name:"contactInfo.address",render:e=>{let{field:t}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"Διεύθυνση"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(k.I,{...t})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(A.Wi,{control:a.control,name:"contactInfo.afm",render:e=>{let{field:t}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"ΑΦΜ"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(k.I,{...t})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(A.Wi,{control:a.control,name:"contactInfo.phone",render:e=>{let{field:t}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"Τηλέφωνο"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(k.I,{...t})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsx)(A.Wi,{control:a.control,name:"contactInfo.email",render:e=>{let{field:t}=e;return(0,r.jsxs)(A.xJ,{children:[(0,r.jsx)(A.lX,{children:"Email"}),(0,r.jsx)(A.NI,{children:(0,r.jsx)(k.I,{...t})}),(0,r.jsx)(A.zG,{})]})}}),(0,r.jsxs)(_.cN,{children:[(0,r.jsx)(_.GG,{asChild:!0,children:(0,r.jsx)(d.z,{type:"button",variant:"outline",disabled:o,children:"Ακύρωση"})}),(0,r.jsxs)(d.z,{type:"submit",disabled:o,children:[o&&(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Αποθήκευση":"Προσθήκη"]})]})]})})]})})}async function O(){let e=(0,l.hJ)(c.db,"companies"),t=(0,l.IO)(e,(0,l.Xo)("name","asc"));return new Promise((e,n)=>{(0,l.cf)(t,t=>{e(t.docs.map(e=>({id:e.id,...e.data()})))},e=>{console.error("Failed to fetch companies in real-time:",e),n(Error("Could not fetch companies."))})})}function D(){let{isEditor:e}=(0,E.a)(),[t,n]=(0,a.useState)(!1),[T,_]=(0,a.useState)(""),[A,D]=(0,a.useState)(null),{toast:U}=(0,v.pm)(),L=(0,s.NL)(),{data:Z=[],isLoading:M}=(0,o.a)({queryKey:["companies"],queryFn:O}),P=(0,i.D)({mutationFn:async e=>{let t=await (0,l.ET)((0,l.hJ)(c.db,"companies"),{...e,createdAt:(0,l.Bt)()});await (0,S.a)("CREATE_COMPANY",{entityId:t.id,entityType:"company",name:e.name})},onSuccess:()=>{L.invalidateQueries({queryKey:["companies"]}),U({title:"Επιτυχία",description:"Η εταιρεία προστέθηκε."}),n(!1)},onError:e=>{U({variant:"destructive",title:"Σφάλμα",description:"Δεν ήταν δυνατή η αποθήκευση: ".concat(e.message)})}}),V=(0,i.D)({mutationFn:async e=>{let{id:t,data:n}=e;await (0,l.r7)((0,l.JU)(c.db,"companies",t),n),await (0,S.a)("UPDATE_COMPANY",{entityId:t,entityType:"company",changes:n})},onSuccess:()=>{L.invalidateQueries({queryKey:["companies"]}),U({title:"Επιτυχία",description:"Η εταιρεία ενημερώθηκε."}),n(!1)},onError:e=>{U({variant:"destructive",title:"Σφάλμα",description:"Η ενημέρωση απέτυχε: ".concat(e.message)})}}),$=(0,i.D)({mutationFn:async e=>{await (0,l.oe)((0,l.JU)(c.db,"companies",e)),await (0,S.a)("DELETE_COMPANY",{entityId:e,entityType:"company"})},onSuccess:()=>{L.invalidateQueries({queryKey:["companies"]}),U({title:"Επιτυχία",description:"Η εταιρεία διαγράφηκε."})},onError:e=>{U({variant:"destructive",title:"Σφάλμα",description:"Η διαγραφή απέτυχε: ".concat(e.message)})}}),J=(0,m.cI)({resolver:(0,x.F)(z),defaultValues:{name:"",logoUrl:"",website:"",contactInfo:{email:"",phone:"",address:"",afm:""}}}),W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;D(e),e?J.reset(e):J.reset({name:"",logoUrl:"",website:"",contactInfo:{email:"",phone:"",address:"",afm:""}}),n(!0)},X=P.isPending||V.isPending,G=(0,a.useMemo)(()=>Z.filter(e=>{var t;return e.name.toLowerCase().includes(T.toLowerCase())||(null===(t=e.contactInfo)||void 0===t?void 0:t.email)&&e.contactInfo.email.toLowerCase().includes(T.toLowerCase())||e.website&&e.website.toLowerCase().includes(T.toLowerCase())}),[Z,T]);return(0,r.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Εταιρείες"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(d.z,{onClick:()=>(0,R.Rk)(G,"companies"),variant:"outline",disabled:M||0===G.length,children:[(0,r.jsx)(p.Z,{className:"mr-2"}),"Εξαγωγή σε JSON"]}),e&&(0,r.jsxs)(d.z,{onClick:()=>W(),children:[(0,r.jsx)(h.Z,{className:"mr-2"}),"Νέα Εταιρεία"]})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(j.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,r.jsx)(k.I,{type:"search",placeholder:"Αναζήτηση σε όνομα, email, website...",className:"pl-10 w-full md:w-1/3",value:T,onChange:e=>_(e.target.value)})]}),(0,r.jsxs)(w.Zb,{children:[(0,r.jsx)(w.Ol,{children:(0,r.jsxs)(w.ll,{children:["Λίστα Εταιρειών (",G.length,")"]})}),(0,r.jsx)(w.aY,{children:M?(0,r.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,r.jsx)(g.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):G.length>0?(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(u.iA,{children:[(0,r.jsx)(u.xD,{children:(0,r.jsxs)(u.SC,{children:[(0,r.jsx)(u.ss,{children:"Εταιρεία"}),(0,r.jsx)(u.ss,{children:"Email"}),(0,r.jsx)(u.ss,{children:"Τηλέφωνο"}),(0,r.jsx)(u.ss,{children:"Website"}),(0,r.jsx)(u.ss,{className:"text-right",children:"Ενέργειες"})]})}),(0,r.jsx)(u.RM,{children:G.map(e=>{var t,n;return(0,r.jsxs)(u.SC,{className:"group",children:[(0,r.jsxs)(u.pj,{className:"font-medium flex items-center gap-2",children:[(0,r.jsxs)(I.qE,{title:e.name,children:[(0,r.jsx)(I.F$,{src:e.logoUrl||void 0,alt:e.name}),(0,r.jsx)(I.Q5,{children:e.name.slice(0,2).toUpperCase()})]}),e.name]}),(0,r.jsx)(u.pj,{children:(null===(t=e.contactInfo)||void 0===t?void 0:t.email)?(0,r.jsx)("a",{href:"mailto:".concat(e.contactInfo.email),className:"text-primary hover:underline",children:e.contactInfo.email}):(0,r.jsx)("span",{className:"text-muted-foreground",children:"N/A"})}),(0,r.jsx)(u.pj,{className:"text-muted-foreground",children:(null===(n=e.contactInfo)||void 0===n?void 0:n.phone)||"N/A"}),(0,r.jsx)(u.pj,{children:e.website?(0,r.jsxs)(C.default,{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1",children:[(0,r.jsx)(b.Z,{size:14}),"Επίσκεψη"]}):(0,r.jsx)("span",{className:"text-muted-foreground",children:"N/A"})}),(0,r.jsx)(u.pj,{className:"text-right",children:(0,r.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex justify-end items-center",children:[(0,r.jsx)(d.z,{variant:"ghost",size:"icon",onClick:()=>W(e),children:(0,r.jsx)(y.Z,{className:"h-4 w-4"})}),(0,r.jsxs)(f.aR,{children:[(0,r.jsx)(f.vW,{asChild:!0,children:(0,r.jsx)(d.z,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:(0,r.jsx)(N.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(f._T,{children:[(0,r.jsxs)(f.fY,{children:[(0,r.jsx)(f.f$,{children:"Είστε σίγουροι;"}),(0,r.jsx)(f.yT,{children:"Αυτή η ενέργεια θα διαγράψει την εταιρεία. Δεν μπορεί να αναιρεθεί."})]}),(0,r.jsxs)(f.xo,{children:[(0,r.jsx)(f.le,{children:"Ακύρωση"}),(0,r.jsx)(f.OL,{onClick:()=>$.mutate(e.id),children:"Διαγραφή"})]})]})]})]})})]},e.id)})})]})}):(0,r.jsx)("p",{className:"text-center text-muted-foreground py-8",children:T?"Δεν βρέθηκαν εταιρείες.":"Δεν υπάρχουν καταχωρημένες εταιρείες."})})]}),e&&(0,r.jsx)(F,{open:t,onOpenChange:n,form:J,onSubmit:J.handleSubmit(e=>{A?V.mutate({id:A.id,data:e}):P.mutate(e)}),isSubmitting:X,editingCompany:A})]})}},29943:function(e,t,n){"use strict";n.d(t,{OL:function(){return j},_T:function(){return f},aR:function(){return l},f$:function(){return p},fY:function(){return m},le:function(){return g},vW:function(){return c},xo:function(){return x},yT:function(){return h}});var r=n(57437),a=n(2265),s=n(76669),o=n(49354),i=n(89733);let l=s.fC,c=s.xz,d=s.h_,u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...a,ref:t})});u.displayName=s.aV.displayName;let f=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(s.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...a})]})});f.displayName=s.VY.displayName;let m=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};m.displayName="AlertDialogHeader";let x=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};x.displayName="AlertDialogFooter";let p=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold",n),...a})});p.displayName=s.Dx.displayName;let h=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",n),...a})});h.displayName=s.dk.displayName;let j=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.aU,{ref:t,className:(0,o.cn)((0,i.d)(),n),...a})});j.displayName=s.aU.displayName;let g=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.$j,{ref:t,className:(0,o.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",n),...a})});g.displayName=s.$j.displayName},80420:function(e,t,n){"use strict";n.d(t,{F$:function(){return l},Q5:function(){return c},qE:function(){return i}});var r=n(57437),a=n(2265),s=n(81464),o=n(49354);let i=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.fC,{ref:t,className:(0,o.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...a})});i.displayName=s.fC.displayName;let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Ee,{ref:t,className:(0,o.cn)("aspect-square h-full w-full",n),...a})});l.displayName=s.Ee.displayName;let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.NY,{ref:t,className:(0,o.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...a})});c.displayName=s.NY.displayName},89733:function(e,t,n){"use strict";n.d(t,{d:function(){return l},z:function(){return c}});var r=n(57437),a=n(2265),s=n(71538),o=n(13027),i=n(49354);let l=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",destructive_outline:"border border-input text-destructive hover:bg-destructive/10",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:n,variant:a,size:o,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(l({variant:a,size:o,className:n})),ref:t,...d})});c.displayName="Button"},48185:function(e,t,n){"use strict";n.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var r=n(57437),a=n(2265),s=n(49354);let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",n),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",n),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",n),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",n),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",n),...a})});u.displayName="CardFooter"},54662:function(e,t,n){"use strict";n.d(t,{$N:function(){return h},Be:function(){return j},GG:function(){return u},Vq:function(){return l},cN:function(){return p},cZ:function(){return m},fK:function(){return x},hg:function(){return c}});var r=n(57437),a=n(2265),s=n(13304),o=n(74697),i=n(49354);let l=s.fC,c=s.xz,d=s.h_,u=s.x8,f=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...a})});f.displayName=s.aV.displayName;let m=a.forwardRef((e,t)=>{let{className:n,children:a,...l}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(f,{}),(0,r.jsxs)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...l,children:[a,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=s.VY.displayName;let x=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};x.displayName="DialogHeader";let p=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};p.displayName="DialogFooter";let h=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",n),...a})});h.displayName=s.Dx.displayName;let j=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...a})});j.displayName=s.dk.displayName},93363:function(e,t,n){"use strict";n.d(t,{NI:function(){return h},Wi:function(){return u},l0:function(){return c},lX:function(){return p},pf:function(){return j},xJ:function(){return x},zG:function(){return g}});var r=n(57437),a=n(2265),s=n(71538),o=n(39343),i=n(49354),l=n(70402);let c=o.RV,d=a.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(d.Provider,{value:{name:t.name},children:(0,r.jsx)(o.Qr,{...t})})},f=()=>{let e=a.useContext(d),t=a.useContext(m),{getFieldState:n,formState:r}=(0,o.Gc)();if(!e)throw Error("useFormField should be used within <FormField>");let s=n(e.name,r),{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...s}},m=a.createContext({}),x=a.forwardRef((e,t)=>{let{className:n,...s}=e,o=a.useId();return(0,r.jsx)(m.Provider,{value:{id:o},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",n),...s})})});x.displayName="FormItem";let p=a.forwardRef((e,t)=>{let{className:n,...a}=e,{error:s,formItemId:o}=f();return(0,r.jsx)(l._,{ref:t,className:(0,i.cn)(s&&"text-destructive",n),htmlFor:o,...a})});p.displayName="FormLabel";let h=a.forwardRef((e,t)=>{let{...n}=e,{error:a,formItemId:o,formDescriptionId:i,formMessageId:l}=f();return(0,r.jsx)(s.g7,{ref:t,id:o,"aria-describedby":a?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!a,...n})});h.displayName="FormControl";let j=a.forwardRef((e,t)=>{let{className:n,...a}=e,{formDescriptionId:s}=f();return(0,r.jsx)("p",{ref:t,id:s,className:(0,i.cn)("text-sm text-muted-foreground",n),...a})});j.displayName="FormDescription";let g=a.forwardRef((e,t)=>{var n;let{className:a,children:s,...o}=e,{error:l,formMessageId:c}=f(),d=l?String(null!==(n=null==l?void 0:l.message)&&void 0!==n?n:""):s;return d?(0,r.jsx)("p",{ref:t,id:c,className:(0,i.cn)("text-sm font-medium text-destructive",a),...o,children:d}):null});g.displayName="FormMessage"},77209:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(57437),a=n(2265),s=n(49354);let o=a.forwardRef((e,t)=>{let{className:n,type:a,...o}=e;return(0,r.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...o})});o.displayName="Input"},70402:function(e,t,n){"use strict";n.d(t,{_:function(){return c}});var r=n(57437),a=n(2265),s=n(38364),o=n(13027),i=n(49354);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.f,{ref:t,className:(0,i.cn)(l(),n),...a})});c.displayName=s.f.displayName},47304:function(e,t,n){"use strict";n.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return o},pj:function(){return u},ss:function(){return d},xD:function(){return i}});var r=n(57437),a=n(2265),s=n(49354);let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",n),...a})})});o.displayName="Table";let i=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",n),...a})});i.displayName="TableHeader";let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",n),...a})});l.displayName="TableBody",a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...a})}).displayName="TableFooter";let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted data-[state=selected]:bg-muted",n),...a})});c.displayName="TableRow";let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...a})});d.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",n),...a})}).displayName="TableCaption"},87786:function(e,t,n){"use strict";n.d(t,{H:function(){return c},a:function(){return d}});var r=n(57437),a=n(2265),s=n(70303),o=n(89506),i=n(31721);let l=(0,a.createContext)({user:void 0,role:null,isLoading:!0,isAdmin:!1,isEditor:!1});function c(e){let{children:t}=e,[n,c]=(0,a.useState)(void 0),[d,u]=(0,a.useState)(null),[f,m]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=(0,s.Aj)(o.I8,async e=>{if(e){c(e);try{let t=await (0,i.zl)(e);u(t)}catch(e){console.error("Error finding or creating user document:",e),u(null)}finally{m(!1)}}else c(null),u(null),m(!1)});return()=>e()},[]),(0,r.jsx)(l.Provider,{value:{user:n,role:d,isLoading:f,isAdmin:"admin"===d,isEditor:"admin"===d||"editor"===d},children:t})}let d=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},86763:function(e,t,n){"use strict";n.d(t,{pm:function(){return f}});var r=n(2265);let a=0,s=new Map,o=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?o(n):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,n=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:n});return d({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||r()}}}),{id:n,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function f(){let[e,t]=r.useState(c);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},31721:function(e,t,n){"use strict";n.d(t,{CC:function(){return o},gX:function(){return l},hg:function(){return i},rr:function(){return a},zl:function(){return s}}),n(74590);var r=n(58064),a=(0,r.$)("650cf0f3f0bd18aeafc63b5f69071e5de8f11976"),s=(0,r.$)("7040ad050d67ddd3204a1b169328d1d9b63993a9"),o=(0,r.$)("bb940dc7dad8d371ecc54c42ecedc64f64a96fbe"),i=(0,r.$)("1929d9b4a55ccca6fd5c13ec1455093a8c2a1bfa");(0,r.$)("7c1778c43d4bcad59f28beb8c7aeb078136cdc4d"),(0,r.$)("948e70e8c58987240e5319b60bd1d6a596ff2cc9");var l=(0,r.$)("9569bcfade6c590b3d19ca071936f2c3b6bbf4e0")},89277:function(e,t,n){"use strict";function r(e,t){let n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}function a(e,t){if(!e||0===e.length){console.warn("Export aborted: No data provided.");return}r(new Blob([JSON.stringify(e,(e,t)=>t&&"object"==typeof t&&t.hasOwnProperty("seconds")&&t.hasOwnProperty("nanoseconds")?new Date(1e3*t.seconds+t.nanoseconds/1e6).toISOString():t,2)],{type:"application/json"}),"".concat(t,".json"))}function s(e,t){if(!e||0===e.length){console.warn("Export to CSV aborted: No data provided.");return}r(new Blob(["\uFEFF"+function(e){if(!e||0===e.length)return"";let t=Object.keys(e[0]),n=e.map(e=>t.map(t=>{let n=e[t];if(null==n)return"";let r=String(n).replace(/"/g,'""');return/[",;\n]/.test(r)?'"'.concat(r,'"'):r}).join(";"));return[t.join(";"),...n].join("\n")}(e)],{type:"text/csv;charset=utf-8;"}),"".concat(t,".csv"))}function o(e,t){let n;if(!e||0===e.length){console.warn("Export to TXT aborted: No data provided.");return}r(new Blob([(n="",e.forEach(e=>{n+="--- ".concat(e.title.toUpperCase()," ---\n"),e.description&&(n+="".concat(e.description,"\n")),n+="\n",e.items.forEach(e=>{e.code?n+="".concat(e.code,"	").concat(e.value,"\n"):n+="".concat(e.value,"\n")}),n+="\n"}),n)],{type:"text/plain;charset=utf-8;"}),"".concat(t,".txt"))}n.d(t,{Rk:function(){return a},m1:function(){return s},rb:function(){return o}})},89506:function(e,t,n){"use strict";n.d(t,{I8:function(){return u},db:function(){return d},tO:function(){return f}});var r=n(15236),a=n(69842),s=n(70303),o=n(57697),i=n(98298);let l={apiKey:"AIzaSyALXvVaqDt2xuX5E8uRIyoBzl9n4WQHLa4",authDomain:"tasia-6f77i.firebaseapp.com",projectId:"tasia-6f77i",storageBucket:"tasia-6f77i.appspot.com",messagingSenderId:"204877276202",appId:"1:204877276202:web:31db4eb5b1c1b7c4078f53",measurementId:n(25566).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID};l&&l.apiKey&&l.projectId||console.error("Firebase configuration is missing. Make sure your environment variables are set up correctly and passed through next.config.js.");let c=(0,r.C6)().length?(0,r.Mq)():(0,r.ZF)(l),d=(0,a.ad)(c),u=(0,s.v0)(c),f=(0,o.cF)(c);(0,i.$C)(c),(0,a.ST)(d).then(()=>console.log("Firestore offline persistence enabled.")).catch(e=>{"failed-precondition"==e.code?console.warn("Firestore persistence failed: Multiple tabs open."):"unimplemented"==e.code&&console.warn("Firestore persistence not supported in this browser.")})},18473:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var r=n(69842),a=n(89506);let s=async(e,t)=>{try{let n=a.I8.currentUser;if(!n){console.warn("Cannot log activity: User is not authenticated.");return}let s={action:e,...t,userId:n.uid,userEmail:n.email,timestamp:(0,r.Bt)()};await (0,r.ET)((0,r.hJ)(a.db,"auditLogs"),s)}catch(e){console.error("Failed to write to audit log:",e)}}},49354:function(e,t,n){"use strict";n.d(t,{cn:function(){return s}});var r=n(44839),a=n(96164);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[3609,9015,8502,1080,5693,323,2962,5590,7138,5975,63,2971,7023,1744],function(){return e(e.s=8728)}),_N_E=e.O()}]);