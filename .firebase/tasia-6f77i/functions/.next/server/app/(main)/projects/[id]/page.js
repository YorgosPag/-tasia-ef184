(()=>{var e={};e.id=3732,e.ids=[3732],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},47064:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(84077),s(58522),s(35866),s(32029);var r=s(23191),n=s(88716),i=s(37922),a=s.n(i),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["(main)",{children:["projects",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,84077)),"/home/user/studio/src/app/(main)/projects/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,58522)),"/home/user/studio/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,32029)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/user/studio/src/app/(main)/projects/[id]/page.tsx"],u="/(main)/projects/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(main)/projects/[id]/page",pathname:"/projects/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19948:(e,t,s)=>{Promise.resolve().then(s.bind(s,59644))},86333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},24230:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},69508:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},63685:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},79635:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7937:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(62881).Z)("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]])},59644:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>tv});var r=s(10326),n=s(17577),i=s.n(n),a=s(35047),l=s(76),o=s(90445),d=s(77506),c=s(91664),u=s(86333),m=s(29752),x=s(38443),p=s(46226),h=s(98181);let f=e=>{if(!e)return"-";let t=e instanceof l.EK?e.toDate():e;return(0,h.WU)(t,"dd/MM/yyyy")};function j({project:e}){return(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{children:[r.jsx(m.ll,{children:e.title}),(0,r.jsxs)(m.SZ,{children:[e.location," | Προθεσμία: ",f(e.deadline)," | Κατάσταση: ",e.status]})]}),(0,r.jsxs)(m.aY,{className:"flex flex-col gap-6 md:flex-row",children:[e.photoUrl&&r.jsx("div",{className:"md:w-1/3 relative aspect-[4/3]",children:r.jsx(p.default,{src:e.photoUrl,alt:`Photo of ${e.title}`,fill:!0,className:"rounded-lg object-contain",sizes:"(max-width: 768px) 100vw, 33vw",loading:"lazy"})}),(0,r.jsxs)("div",{className:"flex-1 space-y-4",children:[e.description&&r.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),e.tags&&e.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map(e=>r.jsx(x.C,{variant:"secondary",children:e},e))})]})]})]})}var g=s(50384),v=s(41156),y=s(22995),b=s(74723),N=s(74064),w=s(13961),k=s(69508),S=s(98091),C=s(84097),I=s(51641),D=s(81079),E=s(49260);function z({project:e}){let t=(0,a.useRouter)(),{toast:s}=(0,C.pm)(),{isEditor:i}=(0,E.a)(),[u,x]=(0,n.useState)([]),[f,j]=(0,n.useState)(!0),[g,z]=(0,n.useState)(!1),[U,Z]=(0,n.useState)(!1),[M,A]=(0,n.useState)(null),P=(0,b.cI)({resolver:(0,N.F)(D.h),defaultValues:{id:void 0,address:"",type:"",description:"",photoUrl:"",floorsCount:void 0,constructionYear:void 0,tags:"",identifier:""}}),L=e=>{Z(e),e||(P.reset(),A(null))},T=async e=>{let t=(0,l.JU)(o.db,"buildings",e.topLevelId),r=await (0,l.QT)(t);if(r.exists()){let t=r.data();P.reset({id:e.id,address:t.address,type:t.type,description:t.description||"",photoUrl:t.photoUrl||"",floorsCount:t.floorsCount||void 0,constructionYear:t.constructionYear||void 0,tags:(t.tags||[]).join(", "),identifier:t.identifier||""}),A(e),Z(!0)}else s({variant:"destructive",title:"Σφάλμα",description:"Could not find building details."})},J=async t=>{let r=u.find(e=>e.id===t);if(r)try{let t=(0,l.qs)(o.db);t.delete((0,l.JU)(o.db,"buildings",r.topLevelId)),t.delete((0,l.JU)(o.db,"projects",e.id,"buildings",r.id)),await t.commit(),s({title:"Επιτυχία",description:"Το κτίριο διαγράφηκε."}),await (0,I.a)("DELETE_BUILDING",{entityId:r.topLevelId,entityType:"building",details:{address:r.address},projectId:e.id})}catch(e){console.error("Error deleting building:",e),s({variant:"destructive",title:"Σφάλμα",description:"Δεν ήταν δυνατή η διαγραφή του κτιρίου."})}},O=async t=>{z(!0);let r={address:t.address,type:t.type,description:t.description||"",photoUrl:t.photoUrl?.trim()||void 0,floorsCount:t.floorsCount||void 0,constructionYear:t.constructionYear||void 0,tags:t.tags?t.tags.split(",").map(e=>e.trim()).filter(Boolean):[],identifier:t.identifier};try{if(M){let t=(0,l.qs)(o.db);t.update((0,l.JU)(o.db,"buildings",M.topLevelId),r),t.update((0,l.JU)(o.db,"projects",e.id,"buildings",M.id),{address:r.address,type:r.type,description:r.description,photoUrl:r.photoUrl}),await t.commit(),s({title:"Επιτυχία",description:"Το κτίριο ενημερώθηκε."}),await (0,I.a)("UPDATE_BUILDING",{entityId:M.topLevelId,entityType:"building",changes:r,projectId:e.id})}else{let t=(0,l.qs)(o.db),n=(0,l.JU)((0,l.hJ)(o.db,"buildings")),i=(0,l.JU)((0,l.hJ)(o.db,"projects",e.id,"buildings"));t.set(n,{...r,projectId:e.id,originalId:i.id,createdAt:(0,l.Bt)()}),t.set(i,{address:r.address,type:r.type,description:r.description,photoUrl:r.photoUrl,topLevelId:n.id,createdAt:(0,l.Bt)()}),await t.commit(),s({title:"Επιτυχία",description:"Το κτίριο προστέθηκε."}),await (0,I.a)("CREATE_BUILDING",{entityId:n.id,entityType:"building",details:r,projectId:e.id})}L(!1)}catch(e){console.error("Error submitting building: ",e),s({variant:"destructive",title:"Σφάλμα",description:"Δεν ήταν δυνατή η υποβολή."})}finally{z(!1)}},R=e=>e?(0,h.WU)(e.toDate(),"dd/MM/yyyy"):"-";return(0,r.jsxs)(m.Zb,{children:[r.jsx(m.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx(m.ll,{children:"Κτίρια του Έργου"}),i&&(0,r.jsxs)(c.z,{size:"sm",onClick:()=>{A(null),P.reset(),Z(!0)},children:[r.jsx(w.Z,{className:"mr-2"}),"Νέο Κτίριο"]})]})}),r.jsx(m.aY,{children:f?r.jsx("div",{className:"flex justify-center items-center h-40",children:r.jsx(d.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):u.length>0?r.jsx("div",{className:"w-full overflow-x-auto",children:(0,r.jsxs)(v.iA,{children:[r.jsx(v.xD,{children:(0,r.jsxs)(v.SC,{children:[r.jsx(v.ss,{className:"w-[60px]",children:"Φωτο"}),r.jsx(v.ss,{children:"Διεύθυνση"}),r.jsx(v.ss,{children:"Τύπος"}),r.jsx(v.ss,{children:"Ημ/νία Δημ."}),r.jsx(v.ss,{className:"text-right",children:"Ενέργειες"})]})}),r.jsx(v.RM,{children:u.map(e=>(0,r.jsxs)(v.SC,{className:"group",children:[r.jsx(v.pj,{children:r.jsx("div",{className:"cursor-pointer w-10 h-10 relative",onClick:()=>t.push(`/buildings/${e.topLevelId}`),children:e.photoUrl?r.jsx(p.default,{src:e.photoUrl,alt:e.address,fill:!0,className:"rounded-md object-cover",sizes:"40px"}):r.jsx("div",{className:"w-10 h-10 bg-muted rounded-md flex items-center justify-center text-muted-foreground text-xs",children:"N/A"})})}),r.jsx(v.pj,{className:"font-medium cursor-pointer",onClick:()=>t.push(`/buildings/${e.topLevelId}`),children:e.address}),r.jsx(v.pj,{className:"text-muted-foreground cursor-pointer",onClick:()=>t.push(`/buildings/${e.topLevelId}`),children:e.type}),r.jsx(v.pj,{className:"cursor-pointer",onClick:()=>t.push(`/buildings/${e.topLevelId}`),children:R(e.createdAt)}),r.jsx(v.pj,{className:"text-right",children:i&&(0,r.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex justify-end gap-2",children:[(0,r.jsxs)(c.z,{variant:"ghost",size:"icon",title:"Επεξεργασία",onClick:t=>{t.stopPropagation(),T(e)},children:[r.jsx(k.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Επεξεργασία"})]}),(0,r.jsxs)(y.aR,{children:[r.jsx(y.vW,{asChild:!0,children:(0,r.jsxs)(c.z,{variant:"ghost",size:"icon",title:"Διαγραφή",className:"text-destructive hover:text-destructive",onClick:e=>e.stopPropagation(),children:[r.jsx(S.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Διαγραφή"})]})}),(0,r.jsxs)(y._T,{children:[(0,r.jsxs)(y.fY,{children:[r.jsx(y.f$,{children:"Είστε σίγουροι;"}),(0,r.jsxs)(y.yT,{children:['Αυτή η ενέργεια δεν μπορεί να αναιρεθεί. Θα διαγραφεί οριστικά το κτίριο "',e.address,'" και όλοι οι όροφοι και τα ακίνητα που περιέχει.']})]}),(0,r.jsxs)(y.xo,{children:[r.jsx(y.le,{children:"Ακύρωση"}),r.jsx(y.OL,{onClick:()=>J(e.id),className:"bg-destructive hover:bg-destructive/90",children:"Διαγραφή"})]})]})]})]})})]},e.id))})]})}):r.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Δεν βρέθηκαν κτίρια για αυτό το έργο."})}),i&&r.jsx(D.$,{open:U,onOpenChange:L,form:P,onSubmit:P.handleSubmit(O),isSubmitting:g,editingBuilding:M})]})}var U=s(31540),Z=s(78632),M=s(11552),A=s(17119);let P=A.Ry({id:A.Z_().optional(),name:A.Z_().min(1,"Το όνομα είναι υποχρεωτικό."),description:A.Z_().optional(),status:A.Km(["Εκκρεμεί","Σε εξέλιξη","Ολοκληρώθηκε","Καθυστερεί"]),assignedTo:A.Z_().optional(),relatedEntityIds:A.Z_().optional(),dependsOn:A.Z_().optional(),notes:A.Z_().optional(),startDate:A.hT().optional().nullable(),endDate:A.hT().optional().nullable(),deadline:A.hT().optional().nullable(),documents:A.Z_().optional(),budgetedCost:A.Z_().optional(),actualCost:A.Z_().optional()});var L=s(64411);let T=e=>{if(!e)return"-";let t=e instanceof l.EK?e.toDate():e;return(0,h.WU)(t,"dd/MM/yyyy")},J=e=>{switch(e){case"Ολοκληρώθηκε":return"default";case"Σε εξέλιξη":return"secondary";case"Καθυστερεί":return"destructive";default:return"outline"}},O=(e=[],t)=>e&&0!==e.length?e.map(e=>t.find(t=>t.id===e)?.name||e).join(", "):"Κανένας",R=e=>null==e?"-":`€${e.toLocaleString("el-GR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,q=e=>e&&0!==e.length?e.filter(e=>e.completed).length/e.length*100:0,W=e=>{let t=q(e.checklist);return e.workSubstages?.length>0?.5*t+e.workSubstages.map(e=>q(e.checklist)).reduce((e,t)=>e+t,0)/e.workSubstages.length*.5:t};var _=s(24118),$=s(9969),X=s(41190),F=s(82015),G=s(37358),V=s(29280),H=s(51027),B=s(33194),Q=s(51223),Y=s(15099);function K({open:e,onOpenChange:t,form:s,onSubmit:n,isSubmitting:i,editingWorkStage:a,companies:l,isLoadingCompanies:o}){return r.jsx(_.Vq,{open:e,onOpenChange:t,children:(0,r.jsxs)(_.cZ,{className:"sm:max-w-lg",children:[r.jsx(_.fK,{children:(0,r.jsxs)(_.$N,{children:[a&&"id"in a?"Επεξεργασία":"Νέο"," ",a&&"parentId"in a?"Υποστάδιο Εργασίας":"Στάδιο Εργασίας"]})}),r.jsx($.l0,{...s,children:(0,r.jsxs)("form",{onSubmit:n,className:"grid max-h-[80vh] gap-4 overflow-y-auto py-4 pr-4",children:[r.jsx($.Wi,{control:s.control,name:"name",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Όνομα"}),r.jsx($.NI,{children:r.jsx(X.I,{...e})}),r.jsx($.zG,{})]})}),r.jsx($.Wi,{control:s.control,name:"description",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Περιγραφή"}),r.jsx($.NI,{children:r.jsx(F.g,{...e})}),r.jsx($.zG,{})]})}),r.jsx($.Wi,{control:s.control,name:"status",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Κατάσταση"}),(0,r.jsxs)(V.Ph,{onValueChange:e.onChange,defaultValue:e.value,children:[r.jsx($.NI,{children:r.jsx(V.i4,{children:r.jsx(V.ki,{})})}),(0,r.jsxs)(V.Bw,{children:[r.jsx(V.Ql,{value:"Εκκρεμεί",children:"Εκκρεμεί"}),r.jsx(V.Ql,{value:"Σε εξέλιξη",children:"Σε εξέλιξη"}),r.jsx(V.Ql,{value:"Ολοκληρώθηκε",children:"Ολοκληρώθηκε"}),r.jsx(V.Ql,{value:"Καθυστερεί",children:"Καθυστερεί"})]})]}),r.jsx($.zG,{})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[r.jsx($.Wi,{control:s.control,name:"budgetedCost",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Προϋπολογισμένο Κόστος (€)"}),r.jsx($.NI,{children:r.jsx(X.I,{type:"number",...e})}),r.jsx($.zG,{})]})}),r.jsx($.Wi,{control:s.control,name:"actualCost",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Πραγματικό Κόστος (€)"}),r.jsx($.NI,{children:r.jsx(X.I,{type:"number",...e})}),r.jsx($.zG,{})]})})]}),r.jsx($.Wi,{control:s.control,name:"assignedTo",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Ανάθεση σε"}),(0,r.jsxs)(V.Ph,{onValueChange:e.onChange,defaultValue:e.value,children:[r.jsx($.NI,{children:r.jsx(V.i4,{children:r.jsx(V.ki,{placeholder:"Επιλέξτε υπεύθυνο..."})})}),(0,r.jsxs)(V.Bw,{children:[r.jsx(V.Ql,{value:"",children:r.jsx("em",{children:"Κανένας"})}),o?r.jsx("div",{className:"flex items-center justify-center p-2",children:r.jsx(d.Z,{className:"h-4 w-4 animate-spin"})}):l.map(e=>r.jsx(V.Ql,{value:e.id,children:e.name},e.id))]})]}),r.jsx($.zG,{})]})}),r.jsx($.Wi,{control:s.control,name:"relatedEntityIds",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Αφορά (IDs κτιρίων/ορόφων/ακινήτων με κόμμα)"}),r.jsx($.NI,{children:r.jsx(X.I,{...e,placeholder:"π.χ. ID κτιρίου, ID ακινήτου..."})}),r.jsx($.zG,{})]})}),r.jsx($.Wi,{control:s.control,name:"dependsOn",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Εξαρτάται από (IDs σταδίων με κόμμα)"}),r.jsx($.NI,{children:r.jsx(X.I,{...e,placeholder:"π.χ. ID σταδίου, ID υποσταδίου..."})}),r.jsx($.zG,{})]})}),r.jsx($.Wi,{control:s.control,name:"documents",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Απαιτούμενα Έγγραφα"}),r.jsx($.NI,{children:r.jsx(F.g,{...e,placeholder:"π.χ. Σχέδια, Άδεια Δόμησης...",rows:3})}),r.jsx($.pf,{children:"Καταχωρήστε ένα όνομα εγγράφου ανά γραμμή."}),r.jsx($.zG,{})]})}),r.jsx($.Wi,{control:s.control,name:"notes",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Σημειώσεις"}),r.jsx($.NI,{children:r.jsx(F.g,{...e})}),r.jsx($.zG,{})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[r.jsx($.Wi,{control:s.control,name:"startDate",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Έναρξη"}),(0,r.jsxs)(H.J2,{children:[r.jsx(H.xo,{asChild:!0,children:r.jsx($.NI,{children:(0,r.jsxs)(c.z,{variant:"outline",className:(0,Q.cn)("w-full pl-3 text-left font-normal",!e.value&&"text-muted-foreground"),children:[e.value?(0,h.WU)(e.value,"P",{locale:Y.el}):r.jsx("span",{children:"Επιλογή"}),r.jsx(G.Z,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),r.jsx(H.yk,{className:"w-auto p-0",align:"start",children:r.jsx(B.f,{mode:"single",selected:e.value??void 0,onSelect:e.onChange,initialFocus:!0})})]}),r.jsx($.zG,{})]})}),r.jsx($.Wi,{control:s.control,name:"endDate",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Λήξη"}),(0,r.jsxs)(H.J2,{children:[r.jsx(H.xo,{asChild:!0,children:r.jsx($.NI,{children:(0,r.jsxs)(c.z,{variant:"outline",className:(0,Q.cn)("w-full pl-3 text-left font-normal",!e.value&&"text-muted-foreground"),children:[e.value?(0,h.WU)(e.value,"P",{locale:Y.el}):r.jsx("span",{children:"Επιλογή"}),r.jsx(G.Z,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),r.jsx(H.yk,{className:"w-auto p-0",align:"start",children:r.jsx(B.f,{mode:"single",selected:e.value??void 0,onSelect:e.onChange,initialFocus:!0})})]}),r.jsx($.zG,{})]})}),r.jsx($.Wi,{control:s.control,name:"deadline",render:({field:e})=>(0,r.jsxs)($.xJ,{children:[r.jsx($.lX,{children:"Προθεσμία"}),(0,r.jsxs)(H.J2,{children:[r.jsx(H.xo,{asChild:!0,children:r.jsx($.NI,{children:(0,r.jsxs)(c.z,{variant:"outline",className:(0,Q.cn)("w-full pl-3 text-left font-normal",!e.value&&"text-muted-foreground"),children:[e.value?(0,h.WU)(e.value,"P",{locale:Y.el}):r.jsx("span",{children:"Επιλογή"}),r.jsx(G.Z,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),r.jsx(H.yk,{className:"w-auto p-0",align:"start",children:r.jsx(B.f,{mode:"single",selected:e.value??void 0,onSelect:e.onChange,initialFocus:!0})})]}),r.jsx($.zG,{})]})})]}),(0,r.jsxs)(_.cN,{children:[r.jsx(_.GG,{asChild:!0,children:r.jsx(c.z,{type:"button",variant:"outline",disabled:i,children:"Ακύρωση"})}),(0,r.jsxs)(c.z,{type:"submit",disabled:i,children:[i&&r.jsx(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Αποθήκευση"]})]})]})})]})})}var ee=s(56556),et=s(33269);let es=i().memo(function({stage:e,isSubstage:t}){let s=(0,n.useMemo)(()=>W(e),[e]);return(0,r.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[r.jsx(x.C,{variant:J(e.status),children:e.status}),r.jsx("span",{className:"font-bold text-base",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-auto w-32",children:[r.jsx(et.E,{value:s,className:"h-2 flex-1"}),(0,r.jsxs)("span",{className:"text-xs font-mono text-muted-foreground",children:[Math.round(s),"%"]})]})]})});var er=s(62881);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let en=(0,er.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var ei=s(79635);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let ea=(0,er.Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),el=(0,er.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),eo=(0,er.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var ed=s(47546);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let ec=(0,er.Z)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),eu=(0,er.Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),em=(0,er.Z)("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);var ex=s(9280),ep=s(44794),eh=s(36283),ef=s(40617),ej=s(83855);function eg({stage:e,onToggle:t,onAdd:s,onNotesChange:i}){let[a,l]=(0,n.useState)(""),o=(0,n.useMemo)(()=>q(e.checklist),[e.checklist]),d=()=>{a.trim()&&(s(a.trim()),l(""))},u=t=>e.documents?.includes(t);return(0,r.jsxs)("div",{className:"mt-4 space-y-3",children:[r.jsx("h4",{className:"font-semibold",children:"Checklist Επιθεώρησης & Εγγράφων"}),e.checklist&&e.checklist.length>0&&(0,r.jsxs)("div",{children:[r.jsx(et.E,{value:o,className:"w-full h-2"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1 text-right",children:[Math.round(o),"% Ολοκληρώθηκε"]})]}),r.jsx("div",{className:"space-y-2",children:e.checklist?.map((s,n)=>r.jsxs("div",{className:"flex flex-col gap-2 bg-muted/50 p-3 rounded-md",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ex.X,{id:`task-${e.id}-${n}`,checked:s.completed,onCheckedChange:e=>t(n,!!e),disabled:u(s.task)}),r.jsxs(ep._,{htmlFor:`task-${e.id}-${n}`,className:`flex-1 flex items-center gap-2 ${s.completed?"line-through text-muted-foreground":""}`,children:[u(s.task)&&r.jsx(eh.Z,{className:"h-4 w-4 text-muted-foreground"}),s.task]})]}),s.completed&&s.completedBy&&r.jsxs("p",{className:"text-xs text-muted-foreground pl-8",children:["Ολοκληρώθηκε από ",s.completedBy," στις"," ",T(s.completionDate)]}),r.jsxs("div",{className:"pl-8 flex items-center gap-2",children:[r.jsx(ef.Z,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(X.I,{placeholder:"Προσθήκη παρατηρήσεων επιθεώρησης...",defaultValue:s.inspectionNotes||"",onBlur:e=>i(n,e.target.value),className:"h-8 text-xs flex-1"})]})]},n))}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(X.I,{value:a,onChange:e=>l(e.target.value),placeholder:"Νέα εργασία επιθεώρησης...",onKeyDown:e=>"Enter"===e.key&&d()}),(0,r.jsxs)(c.z,{size:"sm",onClick:d,children:[r.jsx(ej.Z,{className:"mr-2 h-4 w-4"}),"Προσθήκη Εργασίας"]})]})]})}let ev=(0,s(79360).j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ey=n.forwardRef(({className:e,variant:t,...s},n)=>r.jsx("div",{ref:n,role:"alert",className:(0,Q.cn)(ev({variant:t}),e),...s}));ey.displayName="Alert";let eb=n.forwardRef(({className:e,...t},s)=>r.jsx("h5",{ref:s,className:(0,Q.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));eb.displayName="AlertTitle";let eN=n.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,Q.cn)("text-sm [&_p]:leading-relaxed",e),...t}));function ew(e){return"[object Object]"===Object.prototype.toString.call(e)||Array.isArray(e)}function ek(e,t){let s=Object.keys(e),r=Object.keys(t);return s.length===r.length&&JSON.stringify(Object.keys(e.breakpoints||{}))===JSON.stringify(Object.keys(t.breakpoints||{}))&&s.every(s=>{let r=e[s],n=t[s];return"function"==typeof r?`${r}`==`${n}`:ew(r)&&ew(n)?ek(r,n):r===n})}function eS(e){return e.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function eC(e){return"number"==typeof e}function eI(e){return"string"==typeof e}function eD(e){return"boolean"==typeof e}function eE(e){return"[object Object]"===Object.prototype.toString.call(e)}function ez(e){return Math.abs(e)}function eU(e){return Math.sign(e)}function eZ(e){return eL(e).map(Number)}function eM(e){return e[eA(e)]}function eA(e){return Math.max(0,e.length-1)}function eP(e,t=0){return Array.from(Array(e),(e,s)=>t+s)}function eL(e){return Object.keys(e)}function eT(e,t){return void 0!==t.MouseEvent&&e instanceof t.MouseEvent}function eJ(){let e=[],t={add:function(s,r,n,i={passive:!0}){let a;return"addEventListener"in s?(s.addEventListener(r,n,i),a=()=>s.removeEventListener(r,n,i)):(s.addListener(n),a=()=>s.removeListener(n)),e.push(a),t},clear:function(){e=e.filter(e=>e())}};return t}function eO(e=0,t=0){let s=ez(e-t);function r(s){return s<e||s>t}return{length:s,max:t,min:e,constrain:function(s){return r(s)?s<e?e:t:s},reachedAny:r,reachedMax:function(e){return e>t},reachedMin:function(t){return t<e},removeOffset:function(e){return s?e-s*Math.ceil((e-t)/s):e}}}function eR(e){let t=e;function s(e){return eC(e)?e:e.get()}return{get:function(){return t},set:function(e){t=s(e)},add:function(e){t+=s(e)},subtract:function(e){t-=s(e)}}}function eq(e,t){let s="x"===e.scroll?function(e){return`translate3d(${e}px,0px,0px)`}:function(e){return`translate3d(0px,${e}px,0px)`},r=t.style,n=null,i=!1;return{clear:function(){i||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))},to:function(t){if(i)return;let a=Math.round(100*e.direction(t))/100;a!==n&&(r.transform=s(a),n=a)},toggleActive:function(e){i=!e}}}eN.displayName="AlertDescription";let eW={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function e_(e,t,s){let r,n,i,a,l;let o=e.ownerDocument,d=o.defaultView,c=function(e){function t(e,t){return function e(t,s){return[t,s].reduce((t,s)=>(eL(s).forEach(r=>{let n=t[r],i=s[r],a=eE(n)&&eE(i);t[r]=a?e(n,i):i}),t),{})}(e,t||{})}return{mergeOptions:t,optionsAtMedia:function(s){let r=s.breakpoints||{},n=eL(r).filter(t=>e.matchMedia(t).matches).map(e=>r[e]).reduce((e,s)=>t(e,s),{});return t(s,n)},optionsMediaQueries:function(t){return t.map(e=>eL(e.breakpoints||{})).reduce((e,t)=>e.concat(t),[]).map(e.matchMedia)}}}(d),u=(l=[],{init:function(e,t){return(l=t.filter(({options:e})=>!1!==c.optionsAtMedia(e).active)).forEach(t=>t.init(e,c)),t.reduce((e,t)=>Object.assign(e,{[t.name]:t}),{})},destroy:function(){l=l.filter(e=>e.destroy())}}),m=eJ(),x=function(){let e,t={},s={init:function(t){e=t},emit:function(r){return(t[r]||[]).forEach(t=>t(e,r)),s},off:function(e,r){return t[e]=(t[e]||[]).filter(e=>e!==r),s},on:function(e,r){return t[e]=(t[e]||[]).concat([r]),s},clear:function(){t={}}};return s}(),{mergeOptions:p,optionsAtMedia:h,optionsMediaQueries:f}=c,{on:j,off:g,emit:v}=x,y=!1,b=p(eW,e_.globalOptions),N=p(b),w=[];function k(t,s){!y&&(N=h(b=p(b,t)),w=s||w,function(){let{container:t,slides:s}=N;i=(eI(t)?e.querySelector(t):t)||e.children[0];let r=eI(s)?i.querySelectorAll(s):s;a=[].slice.call(r||i.children)}(),r=function t(s){let r=function(e,t,s,r,n,i,a){let l,o;let{align:d,axis:c,direction:u,startIndex:m,loop:x,duration:p,dragFree:h,dragThreshold:f,inViewThreshold:j,slidesToScroll:g,skipSnaps:v,containScroll:y,watchResize:b,watchSlides:N,watchDrag:w,watchFocus:k}=i,S={measure:function(e){let{offsetTop:t,offsetLeft:s,offsetWidth:r,offsetHeight:n}=e;return{top:t,right:s+r,bottom:t+n,left:s,width:r,height:n}}},C=S.measure(t),I=s.map(S.measure),D=function(e,t){let s="rtl"===t,r="y"===e,n=!r&&s?-1:1;return{scroll:r?"y":"x",cross:r?"x":"y",startEdge:r?"top":s?"right":"left",endEdge:r?"bottom":s?"left":"right",measureSize:function(e){let{height:t,width:s}=e;return r?t:s},direction:function(e){return e*n}}}(c,u),E=D.measureSize(C),z={measure:function(e){return e/100*E}},U=function(e,t){let s={start:function(){return 0},center:function(e){return(t-e)/2},end:function(e){return t-e}};return{measure:function(r,n){return eI(e)?s[e](r):e(t,r,n)}}}(d,E),Z=!x&&!!y,{slideSizes:M,slideSizesWithGaps:A,startGap:P,endGap:L}=function(e,t,s,r,n,i){let{measureSize:a,startEdge:l,endEdge:o}=e,d=s[0]&&n,c=function(){if(!d)return 0;let e=s[0];return ez(t[l]-e[l])}(),u=d?parseFloat(i.getComputedStyle(eM(r)).getPropertyValue(`margin-${o}`)):0,m=s.map(a),x=s.map((e,t,s)=>{let r=t===eA(s);return t?r?m[t]+u:s[t+1][l]-e[l]:m[t]+c}).map(ez);return{slideSizes:m,slideSizesWithGaps:x,startGap:c,endGap:u}}(D,C,I,s,x||!!y,n),T=function(e,t,s,r,n,i,a,l,o){let{startEdge:d,endEdge:c,direction:u}=e,m=eC(s);return{groupSlides:function(e){return m?eZ(e).filter(e=>e%s==0).map(t=>e.slice(t,t+s)):e.length?eZ(e).reduce((s,o,m)=>{let x=eM(s)||0,p=o===eA(e),h=n[d]-i[x][d],f=n[d]-i[o][c],j=r||0!==x?0:u(a),g=ez(f-(!r&&p?u(l):0)-(h+j));return m&&g>t+2&&s.push(o),p&&s.push(e.length),s},[]).map((t,s,r)=>{let n=Math.max(r[s-1]||0);return e.slice(n,t)}):[]}}}(D,E,g,x,C,I,P,L,0),{snaps:J,snapsAligned:O}=function(e,t,s,r,n){let{startEdge:i,endEdge:a}=e,{groupSlides:l}=n,o=l(r).map(e=>eM(e)[a]-e[0][i]).map(ez).map(t.measure),d=r.map(e=>s[i]-e[i]).map(e=>-ez(e)),c=l(d).map(e=>e[0]).map((e,t)=>e+o[t]);return{snaps:d,snapsAligned:c}}(D,U,C,I,T),R=-eM(J)+eM(A),{snapsContained:q,scrollContainLimit:W}=function(e,t,s,r,n){let i=eO(-t+e,0),a=s.map((e,t)=>{let{min:r,max:n}=i,a=i.constrain(e),l=t===eA(s);return t?l||1>=ez(r-a)?r:1>=ez(n-a)?n:a:n}).map(e=>parseFloat(e.toFixed(3))),l=function(){let e=a[0],t=eM(a);return eO(a.lastIndexOf(e),a.indexOf(t)+1)}();return{snapsContained:function(){if(t<=e+2)return[i.max];if("keepSnaps"===r)return a;let{min:s,max:n}=l;return a.slice(s,n)}(),scrollContainLimit:l}}(E,R,O,y,0),_=Z?q:O,{limit:$}=function(e,t,s){let r=t[0];return{limit:eO(s?r-e:eM(t),r)}}(R,_,x),X=function e(t,s,r){let{constrain:n}=eO(0,t),i=t+1,a=l(s);function l(e){return r?ez((i+e)%i):n(e)}function o(){return e(t,a,r)}let d={get:function(){return a},set:function(e){return a=l(e),d},add:function(e){return o().set(a+e)},clone:o};return d}(eA(_),m,x),F=X.clone(),G=eZ(s),V=({dragHandler:e,scrollBody:t,scrollBounds:s,options:{loop:r}})=>{r||s.constrain(e.pointerDown()),t.seek()},H=({scrollBody:e,translate:t,location:s,offsetLocation:r,previousLocation:n,scrollLooper:i,slideLooper:a,dragHandler:l,animation:o,eventHandler:d,scrollBounds:c,options:{loop:u}},m)=>{let x=e.settled(),p=!c.shouldConstrain(),h=u?x:x&&p,f=h&&!l.pointerDown();f&&o.stop();let j=s.get()*m+n.get()*(1-m);r.set(j),u&&(i.loop(e.direction()),a.loop()),t.to(r.get()),f&&d.emit("settle"),h||d.emit("scroll")},B=function(e,t,s,r){let n=eJ(),i=1e3/60,a=null,l=0,o=0;function d(e){if(!o)return;a||(a=e,s(),s());let n=e-a;for(a=e,l+=n;l>=i;)s(),l-=i;r(l/i),o&&(o=t.requestAnimationFrame(d))}function c(){t.cancelAnimationFrame(o),a=null,l=0,o=0}return{init:function(){n.add(e,"visibilitychange",()=>{e.hidden&&(a=null,l=0)})},destroy:function(){c(),n.clear()},start:function(){o||(o=t.requestAnimationFrame(d))},stop:c,update:s,render:r}}(r,n,()=>V(ec),e=>H(ec,e)),Q=_[X.get()],Y=eR(Q),K=eR(Q),ee=eR(Q),et=eR(Q),es=function(e,t,s,r,n,i){let a=0,l=0,o=n,d=.68,c=e.get(),u=0;function m(e){return o=e,p}function x(e){return d=e,p}let p={direction:function(){return l},duration:function(){return o},velocity:function(){return a},seek:function(){let t=r.get()-e.get(),n=0;return o?(s.set(e),a+=t/o,a*=d,c+=a,e.add(a),n=c-u):(a=0,s.set(r),e.set(r),n=t),l=eU(n),u=c,p},settled:function(){return .001>ez(r.get()-t.get())},useBaseFriction:function(){return x(.68)},useBaseDuration:function(){return m(n)},useFriction:x,useDuration:m};return p}(Y,ee,K,et,p,0),er=function(e,t,s,r,n){let{reachedAny:i,removeOffset:a,constrain:l}=r;function o(e){return e.concat().sort((e,t)=>ez(e)-ez(t))[0]}function d(t,r){let n=[t,t+s,t-s];if(!e)return t;if(!r)return o(n);let i=n.filter(e=>eU(e)===r);return i.length?o(i):eM(n)-s}return{byDistance:function(s,r){let o=n.get()+s,{index:c,distance:u}=function(s){let r=e?a(s):l(s),{index:n}=t.map((e,t)=>({diff:d(e-r,0),index:t})).sort((e,t)=>ez(e.diff)-ez(t.diff))[0];return{index:n,distance:r}}(o),m=!e&&i(o);if(!r||m)return{index:c,distance:s};let x=s+d(t[c]-u,0);return{index:c,distance:x}},byIndex:function(e,s){let r=d(t[e]-n.get(),s);return{index:e,distance:r}},shortcut:d}}(x,_,R,$,et),en=function(e,t,s,r,n,i,a){function l(n){let l=n.distance,o=n.index!==t.get();i.add(l),l&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),o&&(s.set(t.get()),t.set(n.index),a.emit("select"))}return{distance:function(e,t){l(n.byDistance(e,t))},index:function(e,s){let r=t.clone().set(e);l(n.byIndex(r.get(),s))}}}(B,X,F,es,er,et,a),ei=function(e){let{max:t,length:s}=e;return{get:function(e){return s?-((e-t)/s):0}}}($),ea=eJ(),el=function(e,t,s,r){let n;let i={},a=null,l=null,o=!1;return{init:function(){n=new IntersectionObserver(e=>{o||(e.forEach(e=>{i[t.indexOf(e.target)]=e}),a=null,l=null,s.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(e=>n.observe(e))},destroy:function(){n&&n.disconnect(),o=!0},get:function(e=!0){if(e&&a)return a;if(!e&&l)return l;let t=eL(i).reduce((t,s)=>{let r=parseInt(s),{isIntersecting:n}=i[r];return(e&&n||!e&&!n)&&t.push(r),t},[]);return e&&(a=t),e||(l=t),t}}}(t,s,a,j),{slideRegistry:eo}=function(e,t,s,r,n,i){let{groupSlides:a}=n,{min:l,max:o}=r;return{slideRegistry:function(){let r=a(i);return 1===s.length?[i]:e&&"keepSnaps"!==t?r.slice(l,o).map((e,t,s)=>{let r=t===eA(s);return t?r?eP(eA(i)-eM(s)[0]+1,eM(s)[0]):e:eP(eM(s[0])+1)}):r}()}}(Z,y,_,W,T,G),ed=function(e,t,s,r,n,i,a,l){let o={passive:!0,capture:!0},d=0;function c(e){"Tab"===e.code&&(d=new Date().getTime())}return{init:function(u){l&&(i.add(document,"keydown",c,!1),t.forEach((t,c)=>{i.add(t,"focus",t=>{(eD(l)||l(u,t))&&function(t){if(new Date().getTime()-d>10)return;a.emit("slideFocusStart"),e.scrollLeft=0;let i=s.findIndex(e=>e.includes(t));eC(i)&&(n.useDuration(0),r.index(i,0),a.emit("slideFocus"))}(c)},o)}))}}}(e,s,eo,en,es,ea,a,k),ec={ownerDocument:r,ownerWindow:n,eventHandler:a,containerRect:C,slideRects:I,animation:B,axis:D,dragHandler:function(e,t,s,r,n,i,a,l,o,d,c,u,m,x,p,h,f,j,g){let{cross:v,direction:y}=e,b=["INPUT","SELECT","TEXTAREA"],N={passive:!1},w=eJ(),k=eJ(),S=eO(50,225).constrain(x.measure(20)),C={mouse:300,touch:400},I={mouse:500,touch:600},D=p?43:25,E=!1,z=0,U=0,Z=!1,M=!1,A=!1,P=!1;function L(e){if(!eT(e,r)&&e.touches.length>=2)return T(e);let t=i.readPoint(e),s=i.readPoint(e,v),a=ez(t-z),o=ez(s-U);if(!M&&!P&&(!e.cancelable||!(M=a>o)))return T(e);let c=i.pointerMove(e);a>h&&(A=!0),d.useFriction(.3).useDuration(.75),l.start(),n.add(y(c)),e.preventDefault()}function T(e){let t=c.byDistance(0,!1).index!==u.get(),s=i.pointerUp(e)*(p?I:C)[P?"mouse":"touch"],r=function(e,t){let s=u.add(-1*eU(e)),r=c.byDistance(e,!p).distance;return p||ez(e)<S?r:f&&t?.5*r:c.byIndex(s.get(),0).distance}(y(s),t),n=function(e,t){var s,r;if(0===e||0===t||ez(e)<=ez(t))return 0;let n=(s=ez(e),r=ez(t),ez(s-r));return ez(n/e)}(s,r);M=!1,Z=!1,k.clear(),d.useDuration(D-10*n).useFriction(.68+n/50),o.distance(r,!p),P=!1,m.emit("pointerUp")}function J(e){A&&(e.stopPropagation(),e.preventDefault(),A=!1)}return{init:function(e){g&&w.add(t,"dragstart",e=>e.preventDefault(),N).add(t,"touchmove",()=>void 0,N).add(t,"touchend",()=>void 0).add(t,"touchstart",l).add(t,"mousedown",l).add(t,"touchcancel",T).add(t,"contextmenu",T).add(t,"click",J,!0);function l(l){(eD(g)||g(e,l))&&function(e){let l=eT(e,r);P=l,A=p&&l&&!e.buttons&&E,E=ez(n.get()-a.get())>=2,l&&0!==e.button||function(e){let t=e.nodeName||"";return b.includes(t)}(e.target)||(Z=!0,i.pointerDown(e),d.useFriction(0).useDuration(0),n.set(a),function(){let e=P?s:t;k.add(e,"touchmove",L,N).add(e,"touchend",T).add(e,"mousemove",L,N).add(e,"mouseup",T)}(),z=i.readPoint(e),U=i.readPoint(e,v),m.emit("pointerDown"))}(l)}},destroy:function(){w.clear(),k.clear()},pointerDown:function(){return Z}}}(D,e,r,n,et,function(e,t){let s,r;function n(e){return e.timeStamp}function i(s,r){let n=r||e.scroll,i=`client${"x"===n?"X":"Y"}`;return(eT(s,t)?s:s.touches[0])[i]}return{pointerDown:function(e){return s=e,r=e,i(e)},pointerMove:function(e){let t=i(e)-i(r),a=n(e)-n(s)>170;return r=e,a&&(s=e),t},pointerUp:function(e){if(!s||!r)return 0;let t=i(r)-i(s),a=n(e)-n(s),l=n(e)-n(r)>170,o=t/a;return a&&!l&&ez(o)>.1?o:0},readPoint:i}}(D,n),Y,B,en,es,er,X,a,z,h,f,v,0,w),eventStore:ea,percentOfView:z,index:X,indexPrevious:F,limit:$,location:Y,offsetLocation:ee,previousLocation:K,options:i,resizeHandler:function(e,t,s,r,n,i,a){let l,o;let d=[e].concat(r),c=[],u=!1;function m(e){return n.measureSize(a.measure(e))}return{init:function(n){i&&(o=m(e),c=r.map(m),l=new ResizeObserver(s=>{(eD(i)||i(n,s))&&function(s){for(let i of s){if(u)return;let s=i.target===e,a=r.indexOf(i.target),l=s?o:c[a];if(ez(m(s?e:r[a])-l)>=.5){n.reInit(),t.emit("resize");break}}}(s)}),s.requestAnimationFrame(()=>{d.forEach(e=>l.observe(e))}))},destroy:function(){u=!0,l&&l.disconnect()}}}(t,a,n,s,D,b,S),scrollBody:es,scrollBounds:function(e,t,s,r,n){let i=n.measure(10),a=n.measure(50),l=eO(.1,.99),o=!1;function d(){return!!(!o&&e.reachedAny(s.get())&&e.reachedAny(t.get()))}return{shouldConstrain:d,constrain:function(n){if(!d())return;let o=e.reachedMin(t.get())?"min":"max",c=ez(e[o]-t.get()),u=s.get()-t.get(),m=l.constrain(c/a);s.subtract(u*m),!n&&ez(u)<i&&(s.set(e.constrain(s.get())),r.useDuration(25).useBaseFriction())},toggleActive:function(e){o=!e}}}($,ee,et,es,z),scrollLooper:function(e,t,s,r){let{reachedMin:n,reachedMax:i}=eO(t.min+.1,t.max+.1);return{loop:function(t){if(!(1===t?i(s.get()):-1===t&&n(s.get())))return;let a=-1*t*e;r.forEach(e=>e.add(a))}}}(R,$,ee,[Y,ee,K,et]),scrollProgress:ei,scrollSnapList:_.map(ei.get),scrollSnaps:_,scrollTarget:er,scrollTo:en,slideLooper:function(e,t,s,r,n,i,a,l,o){let d=eZ(n),c=x(m(eZ(n).reverse(),a[0]),s,!1).concat(x(m(d,t-a[0]-1),-s,!0));function u(e,t){return e.reduce((e,t)=>e-n[t],t)}function m(e,t){return e.reduce((e,s)=>u(e,t)>0?e.concat([s]):e,[])}function x(n,a,d){let c=i.map((e,s)=>({start:e-r[s]+.5+a,end:e+t-.5+a}));return n.map(t=>{let r=d?0:-s,n=d?s:0,i=c[t][d?"end":"start"];return{index:t,loopPoint:i,slideLocation:eR(-1),translate:eq(e,o[t]),target:()=>l.get()>i?r:n}})}return{canLoop:function(){return c.every(({index:e})=>.1>=u(d.filter(t=>t!==e),t))},clear:function(){c.forEach(e=>e.translate.clear())},loop:function(){c.forEach(e=>{let{target:t,translate:s,slideLocation:r}=e,n=t();n!==r.get()&&(s.to(n),r.set(n))})},loopPoints:c}}(D,E,R,M,A,J,_,ee,s),slideFocus:ed,slidesHandler:(o=!1,{init:function(e){N&&(l=new MutationObserver(t=>{!o&&(eD(N)||N(e,t))&&function(t){for(let s of t)if("childList"===s.type){e.reInit(),a.emit("slidesChanged");break}}(t)})).observe(t,{childList:!0})},destroy:function(){l&&l.disconnect(),o=!0}}),slidesInView:el,slideIndexes:G,slideRegistry:eo,slidesToScroll:T,target:et,translate:eq(D,t)};return ec}(e,i,a,o,d,s,x);return s.loop&&!r.slideLooper.canLoop()?t(Object.assign({},s,{loop:!1})):r}(N),f([b,...w.map(({options:e})=>e)]).forEach(e=>m.add(e,"change",S)),N.active&&(r.translate.to(r.location.get()),r.animation.init(),r.slidesInView.init(),r.slideFocus.init(E),r.eventHandler.init(E),r.resizeHandler.init(E),r.slidesHandler.init(E),r.options.loop&&r.slideLooper.loop(),i.offsetParent&&a.length&&r.dragHandler.init(E),n=u.init(E,w)))}function S(e,t){let s=D();C(),k(p({startIndex:s},e),t),x.emit("reInit")}function C(){r.dragHandler.destroy(),r.eventStore.clear(),r.translate.clear(),r.slideLooper.clear(),r.resizeHandler.destroy(),r.slidesHandler.destroy(),r.slidesInView.destroy(),r.animation.destroy(),u.destroy(),m.clear()}function I(e,t,s){N.active&&!y&&(r.scrollBody.useBaseFriction().useDuration(!0===t?0:N.duration),r.scrollTo.index(e,s||0))}function D(){return r.index.get()}let E={canScrollNext:function(){return r.index.add(1).get()!==D()},canScrollPrev:function(){return r.index.add(-1).get()!==D()},containerNode:function(){return i},internalEngine:function(){return r},destroy:function(){y||(y=!0,m.clear(),C(),x.emit("destroy"),x.clear())},off:g,on:j,emit:v,plugins:function(){return n},previousScrollSnap:function(){return r.indexPrevious.get()},reInit:S,rootNode:function(){return e},scrollNext:function(e){I(r.index.add(1).get(),e,-1)},scrollPrev:function(e){I(r.index.add(-1).get(),e,1)},scrollProgress:function(){return r.scrollProgress.get(r.offsetLocation.get())},scrollSnapList:function(){return r.scrollSnapList},scrollTo:I,selectedScrollSnap:D,slideNodes:function(){return a},slidesInView:function(){return r.slidesInView.get()},slidesNotInView:function(){return r.slidesInView.get(!1)}};return k(t,s),setTimeout(()=>x.emit("init"),0),E}function e$(e={},t=[]){let s=(0,n.useRef)(e),r=(0,n.useRef)(t),[i,a]=(0,n.useState)(),[l,o]=(0,n.useState)(),d=(0,n.useCallback)(()=>{i&&i.reInit(s.current,r.current)},[i]);return(0,n.useEffect)(()=>{ek(s.current,e)||(s.current=e,d())},[e,d]),(0,n.useEffect)(()=>{!function(e,t){if(e.length!==t.length)return!1;let s=eS(e),r=eS(t);return s.every((e,t)=>ek(e,r[t]))}(r.current,t)&&(r.current=t,d())},[t,d]),(0,n.useEffect)(()=>{if("undefined"!=typeof window&&window.document&&window.document.createElement&&l){e_.globalOptions=e$.globalOptions;let e=e_(l,s.current,r.current);return a(e),()=>e.destroy()}a(void 0)},[l,a]),[o,i]}e_.globalOptions=void 0,e$.globalOptions=void 0;var eX=s(24230);let eF=n.createContext(null);function eG(){let e=n.useContext(eF);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let eV=n.forwardRef(({orientation:e="horizontal",opts:t,setApi:s,plugins:i,className:a,children:l,...o},d)=>{let[c,u]=e$({...t,axis:"horizontal"===e?"x":"y"},i),[m,x]=n.useState(!1),[p,h]=n.useState(!1),f=n.useCallback(e=>{e&&(x(e.canScrollPrev()),h(e.canScrollNext()))},[]),j=n.useCallback(()=>{u?.scrollPrev()},[u]),g=n.useCallback(()=>{u?.scrollNext()},[u]),v=n.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),j()):"ArrowRight"===e.key&&(e.preventDefault(),g())},[j,g]);return n.useEffect(()=>{if(u)return f(u),u.on("reInit",f),u.on("select",f),()=>{u?.off("select",f)}},[u,f]),r.jsx(eF.Provider,{value:{carouselRef:c,api:u,opts:t,orientation:e,scrollPrev:j,scrollNext:g,canScrollPrev:m,canScrollNext:p},children:r.jsx("div",{ref:d,onKeyDownCapture:v,className:(0,Q.cn)("relative",a),role:"region","aria-roledescription":"carousel",...o,children:l})})});eV.displayName="Carousel";let eH=n.forwardRef(({className:e,...t},s)=>{let{carouselRef:n,orientation:i}=eG();return r.jsx("div",{ref:n,className:"overflow-hidden",children:r.jsx("div",{ref:s,className:(0,Q.cn)("flex","horizontal"===i?"-ml-4":"-mt-4 flex-col",e),...t})})});eH.displayName="CarouselContent";let eB=n.forwardRef(({className:e,...t},s)=>{let{orientation:n}=eG();return r.jsx("div",{ref:s,role:"group","aria-roledescription":"slide",className:(0,Q.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===n?"pl-4":"pt-4",e),...t})});eB.displayName="CarouselItem";let eQ=n.forwardRef(({className:e,variant:t="outline",size:s="icon",...n},i)=>{let{orientation:a,scrollPrev:l,canScrollPrev:o}=eG();return(0,r.jsxs)(c.z,{ref:i,variant:t,size:s,className:(0,Q.cn)("absolute  h-8 w-8 rounded-full","horizontal"===a?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!o,onClick:l,...n,children:[r.jsx(u.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Previous slide"})]})});eQ.displayName="CarouselPrevious";let eY=n.forwardRef(({className:e,variant:t="outline",size:s="icon",...n},i)=>{let{orientation:a,scrollNext:l,canScrollNext:o}=eG();return(0,r.jsxs)(c.z,{ref:i,variant:t,size:s,className:(0,Q.cn)("absolute h-8 w-8 rounded-full","horizontal"===a?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!o,onClick:l,...n,children:[r.jsx(eX.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Next slide"})]})});eY.displayName="CarouselNext";var eK=s(63685),e0=s(7937);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let e1=(0,er.Z)("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]),e2=e=>e?(0,h.WU)(e.toDate(),"dd MMM yyyy, HH:mm",{locale:Y.el}):"Άγνωστη ημερομηνία";function e4({stage:e,onPhotoUpload:t}){let[s,i]=(0,n.useState)(null),[a,l]=(0,n.useState)(!1),o=async()=>{if(!s)return;l(!0),await t(s),l(!1),i(null);let r=document.getElementById(`photo-upload-${e.id}`);r&&(r.value="")};return(0,r.jsxs)(m.Zb,{className:"mt-4",children:[(0,r.jsxs)(m.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)(m.ll,{className:"text-base",children:["Φωτογραφίες Προόδου (",e.photos?.length||0,")"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(X.I,{id:`photo-upload-${e.id}`,type:"file",multiple:!0,accept:"image/*",className:"max-w-xs text-xs h-9",onChange:e=>{i(e.target.files)}}),(0,r.jsxs)(c.z,{size:"sm",onClick:o,disabled:!s||a,children:[r.jsx(eK.Z,{className:"mr-2"}),a?"Ανέβασμα...":"Ανέβασμα"]})]})]}),r.jsx(m.aY,{children:e.photos&&e.photos.length>0?(0,r.jsxs)(eV,{opts:{align:"start",loop:!0},className:"w-full",children:[r.jsx(eH,{children:e.photos.map((e,t)=>r.jsx(eB,{className:"md:basis-1/2 lg:basis-1/3",children:r.jsx("div",{className:"p-1",children:(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(_.Vq,{children:[r.jsx(_.hg,{asChild:!0,children:(0,r.jsxs)(m.aY,{className:"flex flex-col aspect-square items-center justify-center p-0 rounded-lg overflow-hidden group relative cursor-pointer",children:[r.jsx(p.default,{src:e.url,alt:`Progress photo ${t+1}`,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-contain w-full h-full"}),r.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:r.jsx(e0.Z,{className:"h-10 w-10 text-white"})})]})}),r.jsx(_.cZ,{className:"max-w-4xl h-[90vh] p-2 bg-transparent border-none flex items-center justify-center",children:r.jsx("div",{className:"relative w-full h-full",children:r.jsx(p.default,{src:e.url,alt:`Progress photo ${t+1}`,fill:!0,sizes:"100vw",className:"object-contain"})})})]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground p-2 text-center",children:[r.jsx("p",{children:e2(e.uploadedAt)}),(0,r.jsxs)("p",{children:["από ",e.uploadedBy]})]})]})})},t))}),r.jsx(eQ,{}),r.jsx(eY,{})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center text-center text-muted-foreground h-24",children:[r.jsx(e1,{className:"h-8 w-8"}),r.jsx("p",{className:"mt-2 text-sm",children:"Δεν υπάρχουν φωτογραφίες για αυτό το στάδιο."})]})})]})}var e5=s(3594),e3=s(99276),e8=s(71271);function e7(e,t){let s=(0,e8.Q)(e),r=(0,e8.Q)(t),n=s.getTime()-r.getTime();return n<0?-1:n>0?1:n}var e6=s(79740),e9=s(33612),te=s(53704),tt=s(73280),ts=s(61981),tr=s(78349);function tn({comments:e}){return e&&0!==e.length?r.jsx("div",{className:"space-y-4",children:e.map(e=>{var t,s,n;return(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx(e5.qE,{className:"h-8 w-8",children:r.jsx(e5.Q5,{children:(t=e.authorEmail)?t.substring(0,2).toUpperCase():"??"})}),(0,r.jsxs)("div",{className:"flex-1 rounded-md bg-muted/50 p-3",children:[(0,r.jsxs)("div",{className:"flex items-baseline justify-between",children:[r.jsx("p",{className:"font-semibold text-sm",children:e.authorEmail}),r.jsx("time",{className:"text-xs text-muted-foreground",children:(s=e.createdAt.toDate(),n={addSuffix:!0,locale:Y.el},function(e,t,s){var r,n,i,a;let l,o,d;let c=(0,ts.j)(),u=s?.locale??c.locale??tt._,m=e7(e,t);if(isNaN(m))throw RangeError("Invalid time value");let x=Object.assign({},s,{addSuffix:s?.addSuffix,comparison:m});m>0?(l=(0,e8.Q)(t),o=(0,e8.Q)(e)):(l=(0,e8.Q)(e),o=(0,e8.Q)(t));let p=(r=o,n=l,(a=void 0,e=>{let t=(a?Math[a]:Math.trunc)(e);return 0===t?0:t})((+(0,e8.Q)(r)-+(0,e8.Q)(n))/1e3)),h=Math.round((p-((0,tr.D)(o)-(0,tr.D)(l))/1e3)/60);if(h<2){if(s?.includeSeconds){if(p<5)return u.formatDistance("lessThanXSeconds",5,x);if(p<10)return u.formatDistance("lessThanXSeconds",10,x);if(p<20)return u.formatDistance("lessThanXSeconds",20,x);if(p<40)return u.formatDistance("halfAMinute",0,x);else if(p<60)return u.formatDistance("lessThanXMinutes",1,x);else return u.formatDistance("xMinutes",1,x)}return 0===h?u.formatDistance("lessThanXMinutes",1,x):u.formatDistance("xMinutes",h,x)}if(h<45)return u.formatDistance("xMinutes",h,x);if(h<90)return u.formatDistance("aboutXHours",1,x);if(h<e6.H_)return u.formatDistance("aboutXHours",Math.round(h/60),x);if(h<2520)return u.formatDistance("xDays",1,x);if(h<e6.fH){let e=Math.round(h/e6.H_);return u.formatDistance("xDays",e,x)}if(h<2*e6.fH)return d=Math.round(h/e6.fH),u.formatDistance("aboutXMonths",d,x);if((d=function(e,t){let s;let r=(0,e8.Q)(e),n=(0,e8.Q)(t),i=e7(r,n),a=Math.abs((0,e9.T)(r,n));if(a<1)s=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*a);let t=e7(r,n)===-i;(function(e){let t=(0,e8.Q)(e);return+function(e){let t=(0,e8.Q)(e);return t.setHours(23,59,59,999),t}(t)==+(0,te.V)(t)})((0,e8.Q)(e))&&1===a&&1===e7(e,n)&&(t=!1),s=i*(a-Number(t))}return 0===s?0:s}(o,l))<12){let e=Math.round(h/e6.fH);return u.formatDistance("xMonths",e,x)}{let e=d%12,t=Math.trunc(d/12);return e<3?u.formatDistance("aboutXYears",t,x):e<9?u.formatDistance("overXYears",t,x):u.formatDistance("almostXYears",t+1,x)}}(s,(0,e3.L)(s,Date.now()),n))})]}),r.jsx("p",{className:"text-sm mt-1 whitespace-pre-wrap",children:e.text})]})]},e.id)})}):(0,r.jsxs)("div",{className:"text-center text-muted-foreground py-4 text-sm",children:[r.jsx(ef.Z,{className:"mx-auto h-6 w-6"}),r.jsx("p",{className:"mt-2",children:"Δεν υπάρχουν σχόλια ακόμα."})]})}function ti({onSubmit:e}){let{user:t}=(0,E.a)(),[s,i]=(0,n.useState)(""),a=()=>{s.trim()&&t&&(e(s),i(""))};return(0,r.jsxs)(m.eW,{className:"flex gap-2",children:[r.jsx(F.g,{placeholder:"Προσθήκη σχολίου...",className:"flex-1",value:s,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),a())}}),(0,r.jsxs)(c.z,{size:"sm",onClick:a,disabled:!s.trim(),children:[r.jsx(ef.Z,{className:"mr-2"}),"Υποβολή"]})]})}let ta=({icon:e,label:t,children:s})=>(0,r.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[i().createElement(e,{className:"h-4 w-4 mt-0.5 text-muted-foreground flex-shrink-0"}),(0,r.jsxs)("span",{className:"font-semibold",children:[t,":"]}),r.jsx("span",{className:"text-muted-foreground break-words",children:s})]});function tl({stage:e,companies:t,onChecklistItemToggle:s,onAddChecklistItem:n,onAddWorkSubstage:i,onEditWorkStage:a,onDeleteWorkStage:l,onPhotoUpload:o,onInspectionNotesChange:d,onCommentSubmit:u,isSubstage:m}){let x=q(e.checklist);return(0,r.jsxs)("div",{className:"space-y-4 py-4",children:["Ολοκληρώθηκε"!==e.status&&100!==x&&(0,r.jsxs)(ey,{variant:"destructive",children:[r.jsx(en,{className:"h-4 w-4"}),r.jsx(eb,{children:"Εκκρεμείς Επιθεωρήσεις"}),r.jsx(eN,{children:"Το στάδιο δεν μπορεί να ολοκληρωθεί. Παρακαλώ ολοκληρώστε όλα τα αντικείμενα του checklist επιθεώρησης."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-2",children:[r.jsx(ta,{icon:ei.Z,label:"Ανάθεση",children:O(e.assignedTo,t)}),r.jsx(ta,{icon:G.Z,label:"Έναρξη",children:T(e.startDate)}),r.jsx(ta,{icon:ea,label:"Λήξη",children:T(e.endDate)}),r.jsx(ta,{icon:el,label:"Προθεσμία",children:T(e.deadline)}),r.jsx(ta,{icon:eo,label:"Budget",children:R(e.budgetedCost)}),r.jsx(ta,{icon:eo,label:"Actual",children:R(e.actualCost)}),r.jsx(ta,{icon:ed.Z,label:"Σχετίζεται με",children:e.relatedEntityIds?.join(", ")||"-"}),r.jsx(ta,{icon:ec,label:"Εξαρτάται από",children:e.dependsOn?.join(", ")||"-"}),e.notes&&r.jsx("div",{className:"col-span-full",children:r.jsx(ta,{icon:eu,label:"Σημειώσεις",children:e.notes})})]}),r.jsx(e4,{stage:e,onPhotoUpload:t=>o(e,t,m)}),r.jsx(eg,{stage:e,onToggle:(t,r)=>s(e,t,r,m),onAdd:t=>n(e,t,m),onNotesChange:(t,s)=>d(e,t,s,m)}),e.workSubstages&&e.workSubstages.length>0&&(0,r.jsxs)("div",{className:"ml-4 mt-2 border-l-2 pl-4",children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Υποστάδια:"}),e.workSubstages.map(e=>(0,r.jsxs)("div",{className:"mb-4 p-2 rounded-md hover:bg-muted/30",children:[r.jsx(es,{stage:{...e,workSubstages:[]},isSubstage:!0}),r.jsx(tl,{stage:{...e,workSubstages:[]},companies:t,onChecklistItemToggle:s,onAddChecklistItem:n,onEditWorkStage:a,onDeleteWorkStage:l,onPhotoUpload:o,onInspectionNotesChange:d,onCommentSubmit:u,isSubstage:!0})]},e.id))]}),!m&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t",children:[(0,r.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>i?.(e.id),children:[r.jsx(em,{className:"mr-2"}),"Νέο Υποστάδιο"]}),(0,r.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>a(e),children:[r.jsx(k.Z,{className:"mr-2"}),"Επεξεργασία Σταδίου"]}),(0,r.jsxs)(y.aR,{children:[r.jsx(y.vW,{asChild:!0,children:(0,r.jsxs)(c.z,{variant:"destructive_outline",size:"sm",children:[r.jsx(S.Z,{className:"mr-2"}),"Διαγραφή Σταδίου"]})}),(0,r.jsxs)(y._T,{children:[(0,r.jsxs)(y.fY,{children:[r.jsx(y.f$,{children:"Είστε σίγουροι;"}),(0,r.jsxs)(y.yT,{children:['Αυτή η ενέργεια θα διαγράψει οριστικά το στάδιο "',e.name,'" και όλα τα υποστάδια του.']})]}),(0,r.jsxs)(y.xo,{children:[r.jsx(y.le,{children:"Ακύρωση"}),r.jsx(y.OL,{onClick:()=>l(e),className:"bg-destructive hover:bg-destructive/90",children:"Διαγραφή"})]})]})]})]}),(0,r.jsxs)("div",{className:"mt-6 border-t pt-4",children:[r.jsx(tn,{comments:e.comments||[]}),r.jsx(ti,{onSubmit:t=>u(e,t,m)})]})]})}function to({workStages:e,companies:t,onAddWorkSubstage:s,onEditWorkStage:n,onDeleteWorkStage:i,onChecklistItemToggle:a,onAddChecklistItem:l,onInspectionNotesChange:o,onPhotoUpload:d,onCommentSubmit:c}){return r.jsx(ee.UQ,{type:"multiple",className:"w-full",children:e.map(e=>(0,r.jsxs)(ee.Qd,{value:e.id,children:[r.jsx(ee.o4,{className:"hover:bg-muted/50 px-4 rounded-md",children:r.jsx(es,{stage:e,isSubstage:!1})}),r.jsx(ee.vF,{className:"px-4 pt-0",children:r.jsx(tl,{stage:e,companies:t,onChecklistItemToggle:a,onAddChecklistItem:l,onAddWorkSubstage:s,onEditWorkStage:n,onDeleteWorkStage:i,onPhotoUpload:d,onInspectionNotesChange:o,onCommentSubmit:c,isSubstage:!1})})]},e.id))})}/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let td=(0,er.Z)("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);function tc({onAddNewStage:e}){return(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(td,{className:"mx-auto h-12 w-12 text-muted-foreground"}),r.jsx("h3",{className:"mt-4 text-lg font-medium",children:"Δεν υπάρχουν ακόμα στάδια εργασίας"}),r.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Ξεκίνα προσθέτοντας το πρώτο στάδιο για να οργανώσεις το έργο σου."}),r.jsx("div",{className:"mt-6",children:r.jsx(c.z,{onClick:e,children:"Προσθήκη Πρώτου Σταδίου"})})]})}function tu({project:e}){let{isEditor:t}=(0,E.a)(),{companies:s,isLoading:i}=(0,Z.JE)(),{workStages:a,isLoadingWorkStages:u,isSubmitting:x,form:p,editingWorkStage:h,handleEditWorkStage:f,handleAddWorkSubstage:j,handleDeleteWorkStage:g,onSubmitWorkStage:v,handleChecklistItemToggle:y,handleAddChecklistItem:k,handleInspectionNotesChange:S,setEditingWorkStage:D,handlePhotoUpload:z,handleCommentSubmit:A,handleExport:J}=function(e,t){let{workStages:s,setWorkStages:r,isLoadingWorkStages:i}=function(e){let[t,s]=(0,n.useState)([]),[r,i]=(0,n.useState)(!0);return{workStages:t,setWorkStages:s,isLoadingWorkStages:r}}(0),{form:a,isSubmitting:d,editingWorkStage:c,setEditingWorkStage:u,handleEditWorkStage:m,handleAddWorkSubstage:x,onSubmitWorkStage:p}=function(e){let[t,s]=(0,n.useState)(!1),[r,i]=(0,n.useState)(null),{toast:a}=(0,C.pm)(),d=(0,b.cI)({resolver:(0,N.F)(P),defaultValues:{id:void 0,name:"",status:"Εκκρεμεί",assignedTo:"",notes:"",startDate:null,endDate:null,deadline:null,documents:"",description:"",relatedEntityIds:"",dependsOn:"",budgetedCost:"",actualCost:""}}),c=async t=>{if(!e)return;s(!0);let n=(0,l.qs)(o.db),c=Object.fromEntries(Object.entries({name:t.name,description:t.description||"",status:t.status,assignedTo:t.assignedTo?[t.assignedTo]:[],relatedEntityIds:t.relatedEntityIds?t.relatedEntityIds.split(",").map(e=>e.trim()).filter(Boolean):[],dependsOn:t.dependsOn?t.dependsOn.split(",").map(e=>e.trim()).filter(Boolean):[],notes:t.notes||"",startDate:t.startDate,endDate:t.endDate,deadline:t.deadline,documents:t.documents?t.documents.split("\\n").map(e=>e.trim()).filter(Boolean):[],budgetedCost:t.budgetedCost?parseFloat(t.budgetedCost):void 0,actualCost:t.actualCost?parseFloat(t.actualCost):void 0}).filter(([e,t])=>null!=t&&""!==t));if(c.startDate&&(c.startDate=l.EK.fromDate(c.startDate)),c.endDate&&(c.endDate=l.EK.fromDate(c.endDate)),c.deadline&&(c.deadline=l.EK.fromDate(c.deadline)),c.documents&&Array.isArray(c.documents)){let e=c.documents.map(e=>({task:e,completed:!1})),t=(r&&"checklist"in r&&r.checklist||[]).filter(e=>!e.task.startsWith("Doc:"));c.checklist=[...t,...e]}try{let t=r&&"parentId"in r;if(r&&"id"in r){let t=r.parentId,s=r.id,i=r.topLevelId;if(!i)throw Error("topLevelId is missing for editing.");let d=t?(0,l.JU)(o.db,"workSubstages",i):(0,l.JU)(o.db,"workStages",i),u=t?(0,l.JU)(o.db,"projects",e,"workStages",t,"workSubstages",s):(0,l.JU)(o.db,"projects",e,"workStages",s);n.update(d,{...c,assignedToId:c.assignedTo?.[0]||null}),n.update(u,c),a({title:"Επιτυχία",description:"Το Στάδιο Εργασίας ενημερώθηκε."})}else{let s=t?r.parentId:null;if(t&&!s)throw Error("Parent ID is missing for substage creation.");let i=s?(0,l.JU)((0,l.hJ)(o.db,"workSubstages")):(0,l.JU)((0,l.hJ)(o.db,"workStages")),d=(0,l.JU)((0,l.hJ)(o.db,"projects",e,s?`workStages/${s}/workSubstages`:"workStages"));n.set(d,{...c,createdAt:(0,l.Bt)(),inspections:[],photos:[],comments:[],topLevelId:i.id}),n.set(i,{...c,projectId:e,parentStageId:s,assignedToId:c.assignedTo?.[0]||null,createdAt:(0,l.Bt)(),originalId:d.id}),a({title:"Επιτυχία",description:`Το ${t?"υποστάδιο":"στάδιο"} προστέθηκε.`})}await n.commit(),i(null),d.reset()}catch(e){console.error("Error submitting work stage/substage:",e),a({variant:"destructive",title:"Σφάλμα",description:"Η υποβολή απέτυχε."})}finally{s(!1)}};return{form:d,isSubmitting:t,editingWorkStage:r,setEditingWorkStage:i,handleEditWorkStage:(e,t)=>{i(t?{...e,parentId:t}:e),d.reset({...e,description:e.description||"",notes:e.notes||"",assignedTo:e.assignedTo?.[0]||"",documents:e.documents?.join("\\n")||"",relatedEntityIds:e.relatedEntityIds?.join(", ")||"",dependsOn:e.dependsOn?.join(", ")||"",startDate:e.startDate?.toDate()||null,endDate:e.endDate?.toDate()||null,deadline:e.deadline?.toDate()||null,budgetedCost:e.budgetedCost?.toString()||"",actualCost:e.actualCost?.toString()||""})},handleAddWorkSubstage:e=>{i({parentId:e}),d.reset({status:"Εκκρεμεί",name:"",description:"",notes:"",documents:"",assignedTo:""})},onSubmitWorkStage:c}}(e),{handleDeleteWorkStage:h,handleExport:f}=function(e,t,s){let{toast:r}=(0,C.pm)();return{handleDeleteWorkStage:async(t,s)=>{if(!e)return;let n=(0,l.qs)(o.db);try{if(s){let r=(0,l.JU)(o.db,"projects",e,"workStages",s,"workSubstages",t.id),i=(0,l.JU)(o.db,"workSubstages",t.topLevelId);n.delete(r),n.delete(i)}else{let s=(0,l.JU)(o.db,"projects",e,"workStages",t.id),r=(0,l.JU)(o.db,"workStages",t.topLevelId);for(let e of(n.delete(s),n.delete(r),(await (0,l.PL)((0,l.hJ)(s,"workSubstages"))).docs)){n.delete(e.ref);let t=e.data().topLevelId;t&&n.delete((0,l.JU)(o.db,"workSubstages",t))}}await n.commit(),r({title:"Επιτυχία",description:"Το Στάδιο Εργασίας διαγράφηκε."}),await (0,I.a)(s?"DELETE_WORK_SUBSTAGE":"DELETE_WORK_STAGE",{entityId:t.id,entityType:s?"workSubstage":"workStage",details:{name:t.name,parentId:s},projectId:e})}catch(e){console.error("Error deleting work stage/substage:",e),r({variant:"destructive",title:"Σφάλμα",description:"Η διαγραφή απέτυχε."})}},handleExport:(0,n.useCallback)(()=>{let e=s.flatMap(e=>{let t={level:"Στάδιο Εργασίας",name:e.name,status:e.status,startDate:T(e.startDate),endDate:T(e.endDate),deadline:T(e.deadline),budgetedCost:e.budgetedCost,actualCost:e.actualCost};return 0===e.workSubstages.length?[t]:[t,...e.workSubstages.map(t=>({level:"Υποστάδιο Εργασίας",name:`${e.name} > ${t.name}`,status:t.status,startDate:T(t.startDate),endDate:T(t.endDate),deadline:T(t.deadline),budgetedCost:t.budgetedCost,actualCost:t.actualCost}))]}),r=`report-${t.toLowerCase().replace(/\s+/g,"-")}`;(0,L.Rk)(e,r)},[s,t])}}(e,t,s),{handleChecklistItemToggle:j,handleAddChecklistItem:g,handleInspectionNotesChange:v}=function(e,t,s){let{user:r}=(0,E.a)(),{toast:n}=(0,C.pm)();return{handleChecklistItemToggle:async(i,a,d,c)=>{if(!e||!r)return;let u=c?t.find(e=>e.workSubstages.some(e=>e.id===i.id))?.id:void 0;if(c&&!u)return;let m=[...t];s(m.map(e=>{if(!c&&e.id===i.id){let t=[...e.checklist||[]];return t[a]={...t[a],completed:d},{...e,checklist:t}}return c&&e.id===u?{...e,workSubstages:e.workSubstages.map(e=>{if(e.id===i.id){let t=[...e.checklist||[]];return t[a]={...t[a],completed:d},{...e,checklist:t}}return e})}:e}));try{let t=u?(0,l.JU)(o.db,"projects",e,"workStages",u,"workSubstages",i.id):(0,l.JU)(o.db,"projects",e,"workStages",i.id),s=[...i.checklist||[]],n={...s[a],completed:d,completionDate:d?l.EK.now():void 0,completedBy:d&&r.email||void 0};s[a]=n;let c=(0,l.qs)(o.db);c.update(t,{checklist:s});let m=i.topLevelId;if(m){let e=u?(0,l.JU)(o.db,"workSubstages",m):(0,l.JU)(o.db,"workStages",m);c.update(e,{checklist:s})}await c.commit()}catch(e){console.error("Failed to update checklist item:",e),s(m),n({variant:"destructive",title:"Σφάλμα",description:"Η αλλαγή απέτυχε. Επαναφορά."})}},handleAddChecklistItem:async(s,r,n)=>{if(!e)return;let i=n?t.find(e=>e.workSubstages.some(e=>e.id===s.id))?.id:void 0;if(n&&!i)return;let a=i?(0,l.JU)(o.db,"projects",e,"workStages",i,"workSubstages",s.id):(0,l.JU)(o.db,"projects",e,"workStages",s.id),d={task:r,completed:!1},c=(0,l.qs)(o.db);c.update(a,{checklist:(0,l.vr)(d)});let u=s.topLevelId;if(u){let e=i?(0,l.JU)(o.db,"workSubstages",u):(0,l.JU)(o.db,"workStages",u);c.update(e,{checklist:(0,l.vr)(d)})}await c.commit()},handleInspectionNotesChange:async(s,r,i,a)=>{if(!e)return;let d=a?t.find(e=>e.workSubstages.some(e=>e.id===s.id))?.id:void 0;if(a&&!d)return;let c=d?(0,l.JU)(o.db,"projects",e,"workStages",d,"workSubstages",s.id):(0,l.JU)(o.db,"projects",e,"workStages",s.id),u=[...s.checklist||[]];u[r]&&(u[r].inspectionNotes=i);let m=(0,l.qs)(o.db);m.update(c,{checklist:u});let x=s.topLevelId;if(x){let e=d?(0,l.JU)(o.db,"workSubstages",x):(0,l.JU)(o.db,"workStages",x);m.update(e,{checklist:u})}await m.commit(),n({title:"Οι παρατηρήσεις αποθηκεύτηκαν."})}}}(e,s,r),{handlePhotoUpload:y,handleCommentSubmit:w}=function(e,t){let{user:s}=(0,E.a)(),{toast:r}=(0,C.pm)();return{handlePhotoUpload:async(n,i,a)=>{if(!i.length||!s||!e)return;let d=a?t.find(e=>e.workSubstages.some(e=>e.id===n.id))?.id:void 0;if(a&&!d)return;let c=d?(0,l.JU)(o.db,"projects",e,"workStages",d,"workSubstages",n.id):(0,l.JU)(o.db,"projects",e,"workStages",n.id);r({title:"Ανέβασμα...",description:`Ανέβασμα ${i.length} φωτογραφιών...`});try{let t=Array.from(i).map(async t=>{let r=(0,M.iH)(o.tO,`work_stages_photos/${e}/${n.id}/${t.name}`);return await (0,M.KV)(r,t),{url:await (0,M.Jt)(r),uploadedAt:l.EK.now(),uploadedBy:s.email||s.uid,name:t.name}}),a=await Promise.all(t),u=(0,l.qs)(o.db);u.update(c,{photos:(0,l.vr)(...a)});let m=n.topLevelId;if(m){let e=d?(0,l.JU)(o.db,"workSubstages",m):(0,l.JU)(o.db,"workStages",m);u.update(e,{photos:(0,l.vr)(...a)})}await u.commit(),r({title:"Επιτυχία",description:"Οι φωτογραφίες ανέβηκαν επιτυχώς."})}catch(e){console.error("Photo upload failed:",e),r({variant:"destructive",title:"Σφάλμα",description:"Το ανέβασμα των φωτογραφιών απέτυχε."})}},handleCommentSubmit:async(r,n,i)=>{if(!e||!s?.email)return;let a=i?t.find(e=>e.workSubstages.some(e=>e.id===r.id))?.id:void 0;if(i&&!a)return;let d=a?(0,l.JU)(o.db,"projects",e,"workStages",a,"workSubstages",r.id):(0,l.JU)(o.db,"projects",e,"workStages",r.id),c={id:(0,l.JU)((0,l.hJ)(o.db,"dummy")).id,text:n,authorId:s.uid,authorEmail:s.email,createdAt:l.EK.now(),type:"client"===s.photoURL?"client":"internal"},u=(0,l.qs)(o.db);u.update(d,{comments:(0,l.vr)(c)});let m=r.topLevelId;if(m){let e=a?(0,l.JU)(o.db,"workSubstages",m):(0,l.JU)(o.db,"workStages",m);u.update(e,{comments:(0,l.vr)(c)})}await u.commit()}}}(e,s);return{workStages:s,isLoadingWorkStages:i,isSubmitting:d,form:a,editingWorkStage:c,setEditingWorkStage:u,handleEditWorkStage:m,handleAddWorkSubstage:x,handleDeleteWorkStage:h,onSubmitWorkStage:p,handleChecklistItemToggle:j,handleAddChecklistItem:g,handleInspectionNotesChange:v,handlePhotoUpload:y,handleCommentSubmit:w,handleExport:f}}(e.id,e.title),[O,R]=(0,n.useState)(!1),q=()=>R(!0),W=()=>{D(null),p.reset({status:"Εκκρεμεί",name:"",description:"",notes:"",documents:"",assignedTo:""}),q()};return(0,r.jsxs)(m.Zb,{children:[r.jsx(m.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx(m.ll,{children:"Στάδια Εργασίας"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(c.z,{size:"sm",variant:"outline",onClick:J,disabled:u||0===a.length,children:[r.jsx(U.Z,{className:"mr-2"}),"Εξαγωγή Αναφοράς"]}),t&&(0,r.jsxs)(c.z,{size:"sm",onClick:W,children:[r.jsx(w.Z,{className:"mr-2"}),"Νέο Στάδιο Εργασίας"]})]})]})}),r.jsx(m.aY,{children:u?r.jsx("div",{className:"flex justify-center items-center h-24",children:r.jsx(d.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.length>0?r.jsx(to,{workStages:a,companies:s,onAddWorkSubstage:e=>{j(e),q()},onEditWorkStage:(e,t)=>{f(e,t),q()},onDeleteWorkStage:g,onChecklistItemToggle:y,onAddChecklistItem:k,onInspectionNotesChange:S,onPhotoUpload:z,onCommentSubmit:A}):r.jsx(tc,{onAddNewStage:W})}),t&&r.jsx(K,{open:O,onOpenChange:()=>{R(!1),D(null),p.reset()},form:p,onSubmit:p.handleSubmit(v),isSubmitting:x,editingWorkStage:h,companies:s,isLoadingCompanies:i})]})}var tm=s(88307),tx=s(20108);async function tp(e){if(!e)return[];let t=(0,l.hJ)(o.db,"auditLogs"),s=(0,l.IO)(t,(0,l.ar)("projectId","==",e),(0,l.Xo)("timestamp","desc"));return new Promise((e,t)=>{(0,l.cf)(s,t=>{e(t.docs.map(e=>({id:e.id,...e.data()})))},e=>{console.error("Failed to fetch project audit logs:",e),t(e)})})}function th({projectId:e}){let[t,s]=(0,n.useState)(""),{toast:i}=(0,C.pm)(),{data:a=[],isLoading:l,isError:o}=(0,tx.a)({queryKey:["projectAuditLogs",e],queryFn:()=>tp(e),enabled:!!e}),c=e=>e?e.toDate?(0,h.WU)(e.toDate(),"dd/MM/yyyy, HH:mm:ss",{locale:Y.el}):"Άγνωστη ημερομηνία":"N/A",u=(0,n.useMemo)(()=>a?a.filter(e=>{let s=t.toLowerCase();return e.action.toLowerCase().includes(s)||e.entityType.toLowerCase().includes(s)||e.userEmail.toLowerCase().includes(s)||e.entityId.toLowerCase().includes(s)}):[],[a,t]),p=e=>e.startsWith("CREATE")||e.startsWith("DUPLICATE")?"default":e.startsWith("UPDATE")||e.startsWith("UPLOAD")?"secondary":e.startsWith("DELETE")?"destructive":"outline";return(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{children:[r.jsx(m.ll,{children:"Ιστορικό Ενεργειών Έργου"}),r.jsx(m.SZ,{children:"Καταγραφή όλων των αλλαγών που έχουν γίνει σε αυτό το έργο."})]}),(0,r.jsxs)(m.aY,{children:[(0,r.jsxs)("div",{className:"relative mb-4",children:[r.jsx(tm.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),r.jsx(X.I,{type:"search",placeholder:"Αναζήτηση στο ιστορικό του έργου...",className:"pl-10 w-full md:w-1/3",value:t,onChange:e=>s(e.target.value)})]}),l?r.jsx("div",{className:"flex justify-center items-center h-40",children:r.jsx(d.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):o?r.jsx("p",{className:"text-center text-destructive py-8",children:"Σφάλμα κατά τη φόρτωση του ιστορικού."}):u.length>0?(0,r.jsxs)(v.iA,{children:[r.jsx(v.xD,{children:(0,r.jsxs)(v.SC,{children:[r.jsx(v.ss,{children:"Χρονοσφραγίδα"}),r.jsx(v.ss,{children:"Χρήστης"}),r.jsx(v.ss,{children:"Ενέργεια"}),r.jsx(v.ss,{children:"Τύπος Οντότητας"}),r.jsx(v.ss,{children:"ID Οντότητας"})]})}),r.jsx(v.RM,{children:u.map(e=>(0,r.jsxs)(v.SC,{children:[r.jsx(v.pj,{className:"text-muted-foreground whitespace-nowrap",children:c(e.timestamp)}),r.jsx(v.pj,{className:"font-medium",children:e.userEmail}),r.jsx(v.pj,{children:r.jsx(x.C,{variant:p(e.action),children:e.action})}),r.jsx(v.pj,{className:"text-muted-foreground",children:e.entityType}),r.jsx(v.pj,{className:"text-muted-foreground font-mono text-xs",children:e.entityId})]},e.id))})]}):r.jsx("p",{className:"text-center text-muted-foreground py-8",children:t?"Δεν βρέθηκαν εγγραφές που να ταιριάζουν με την αναζήτηση.":"Δεν υπάρχουν εγγραφές στο ιστορικό για αυτό το έργο."})]})]})}function tf({project:e}){return(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx(m.ll,{children:"Συσκέψεις Έργου"}),(0,r.jsxs)(c.z,{size:"sm",onClick:()=>alert("New Meeting form will open!"),children:[r.jsx(w.Z,{className:"mr-2"}),"Νέα Συνάντηση"]})]}),r.jsx(m.SZ,{children:"Καταγραφή και παρακολούθηση όλων των συναντήσεων που αφορούν το έργο."})]}),r.jsx(m.aY,{children:(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("h3",{className:"mt-4 text-lg font-medium",children:"Δεν έχουν καταγραφεί συναντήσεις"}),r.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Καταγράψτε την πρώτη συνάντηση για να ξεκινήσετε."}),r.jsx("div",{className:"mt-6",children:r.jsx(c.z,{onClick:()=>alert("New Meeting form will open!"),children:"Καταγραφή Πρώτης Συνάντησης"})})]})})]})}function tj({project:e}){return(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx(m.ll,{children:"Συμβόλαια & Συμφωνητικά Έργου"}),(0,r.jsxs)(c.z,{size:"sm",onClick:()=>alert("New Contract form will open!"),children:[r.jsx(w.Z,{className:"mr-2"}),"Νέο Συμβόλαιο"]})]}),r.jsx(m.SZ,{children:"Διαχείριση όλων των συμβατικών εγγράφων που σχετίζονται με το έργο."})]}),r.jsx(m.aY,{children:(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("h3",{className:"mt-4 text-lg font-medium",children:"Δεν έχουν καταγραφεί συμβόλαια"}),r.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Καταχωρήστε το πρώτο συμβόλαιο για να ξεκινήσετε."}),r.jsx("div",{className:"mt-6",children:r.jsx(c.z,{onClick:()=>alert("New Contract form will open!"),children:"Καταχώρηση Πρώτου Συμβολαίου"})})]})})]})}function tg({project:e}){return(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx(m.ll,{children:"Παραγγελίες & Παραλαβές Υλικών"}),(0,r.jsxs)(c.z,{size:"sm",onClick:()=>alert("New Order form will open!"),children:[r.jsx(w.Z,{className:"mr-2"}),"Νέα Παραγγελία"]})]}),r.jsx(m.SZ,{children:"Διαχείριση όλων των παραγγελιών και παραλαβών υλικών που σχετίζονται με το έργο."})]}),r.jsx(m.aY,{children:(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("h3",{className:"mt-4 text-lg font-medium",children:"Δεν έχουν καταγραφεί παραγγελίες"}),r.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Καταχωρήστε την πρώτη παραγγελία για να ξεκινήσετε."}),r.jsx("div",{className:"mt-6",children:r.jsx(c.z,{onClick:()=>alert("New Order form will open!"),children:"Καταχώρηση Πρώτης Παραγγελίας"})})]})})]})}function tv(){let e=(0,a.useParams)(),t=(0,a.useRouter)(),s=(0,a.useSearchParams)(),i=e.id,l=s.get("view")||"work-stages",[o,m]=(0,n.useState)(null),[x,p]=(0,n.useState)(!0);return x?r.jsx("div",{className:"flex h-full w-full items-center justify-center",children:r.jsx(d.Z,{className:"h-16 w-16 animate-spin text-muted-foreground"})}):o?(0,r.jsxs)("div",{className:"flex flex-col gap-8",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>t.push("/projects"),className:"w-fit",children:[r.jsx(u.Z,{className:"mr-2 h-4 w-4"}),"Επιστροφή στη Λίστα"]})}),r.jsx(j,{project:o}),(0,r.jsxs)(g.mQ,{value:l,onValueChange:e=>{t.push(`/projects/${i}?view=${e}`)},className:"w-full",children:[(0,r.jsxs)(g.dr,{className:"grid w-full grid-cols-6",children:[r.jsx(g.SP,{value:"work-stages",children:"Στάδια Εργασιών"}),r.jsx(g.SP,{value:"buildings",children:"Κτίρια"}),r.jsx(g.SP,{value:"meetings",children:"Συσκέψεις"}),r.jsx(g.SP,{value:"contracts",children:"Συμβόλαια"}),r.jsx(g.SP,{value:"materials",children:"Υλικά"}),r.jsx(g.SP,{value:"activity",children:"Ιστορικό"})]}),r.jsx(g.nU,{value:"work-stages",className:"mt-4",children:r.jsx(tu,{project:o})}),r.jsx(g.nU,{value:"buildings",className:"mt-4",children:r.jsx(z,{project:o})}),r.jsx(g.nU,{value:"meetings",className:"mt-4",children:r.jsx(tf,{project:o})}),r.jsx(g.nU,{value:"contracts",className:"mt-4",children:r.jsx(tj,{project:o})}),r.jsx(g.nU,{value:"materials",className:"mt-4",children:r.jsx(tg,{project:o})}),r.jsx(g.nU,{value:"activity",className:"mt-4",children:r.jsx(th,{projectId:o.id})})]})]}):r.jsx("p",{className:"text-center",children:"Δεν βρέθηκε το έργο."})}},81079:(e,t,s)=>{"use strict";s.d(t,{$:()=>m,h:()=>u});var r=s(10326),n=s(17119),i=s(24118),a=s(9969),l=s(41190),o=s(82015),d=s(91664),c=s(77506);let u=n.Ry({id:n.Z_().optional(),address:n.Z_().min(1,{message:"Η διεύθυνση είναι υποχρεωτική."}),type:n.Z_().min(1,{message:"Ο τύπος είναι υποχρεωτικός."}),description:n.Z_().optional(),photoUrl:n.Z_().url({message:"Το URL της φωτογραφίας δεν είναι έγκυρο."}).or(n.i0("")),floorsCount:n.oQ.number().int().positive().optional(),constructionYear:n.oQ.number().int().min(1900).max(new Date().getFullYear()+5).optional(),tags:n.Z_().optional(),identifier:n.Z_().min(1,"Ο κωδικός κτιρίου είναι υποχρεωτικός.")});function m({open:e,onOpenChange:t,form:s,onSubmit:n,isSubmitting:u,editingBuilding:m}){return r.jsx(i.Vq,{open:e,onOpenChange:t,children:(0,r.jsxs)(i.cZ,{className:"sm:max-w-lg",children:[(0,r.jsxs)(i.fK,{children:[(0,r.jsxs)(i.$N,{children:[m?"Επεξεργασία":"Προσθήκη Νέου"," Κτιρίου"]}),r.jsx(i.Be,{children:"Συμπληρώστε τις πληροφορίες για το κτίριο του έργου."})]}),r.jsx(a.l0,{...s,children:(0,r.jsxs)("form",{onSubmit:n,className:"grid max-h-[80vh] gap-4 overflow-y-auto py-4 pr-4",children:[r.jsx(a.Wi,{control:s.control,name:"identifier",render:({field:e})=>(0,r.jsxs)(a.xJ,{children:[r.jsx(a.lX,{children:"Κωδικός Κτιρίου"}),r.jsx(a.NI,{children:r.jsx(l.I,{placeholder:"π.χ. Α, Β, W1",...e})}),r.jsx(a.zG,{})]})}),r.jsx(a.Wi,{control:s.control,name:"address",render:({field:e})=>(0,r.jsxs)(a.xJ,{children:[r.jsx(a.lX,{children:"Διεύθυνση"}),r.jsx(a.NI,{children:r.jsx(l.I,{...e})}),r.jsx(a.zG,{})]})}),r.jsx(a.Wi,{control:s.control,name:"type",render:({field:e})=>(0,r.jsxs)(a.xJ,{children:[r.jsx(a.lX,{children:"Τύπος"}),r.jsx(a.NI,{children:r.jsx(l.I,{...e})}),r.jsx(a.zG,{})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(a.Wi,{control:s.control,name:"floorsCount",render:({field:e})=>(0,r.jsxs)(a.xJ,{children:[r.jsx(a.lX,{children:"Αρ. Ορόφων"}),r.jsx(a.NI,{children:r.jsx(l.I,{type:"number",...e,onChange:t=>e.onChange(""===t.target.value?void 0:Number(t.target.value))})}),r.jsx(a.zG,{})]})}),r.jsx(a.Wi,{control:s.control,name:"constructionYear",render:({field:e})=>(0,r.jsxs)(a.xJ,{children:[r.jsx(a.lX,{children:"Έτος Κατασκευής"}),r.jsx(a.NI,{children:r.jsx(l.I,{type:"number",...e,onChange:t=>e.onChange(""===t.target.value?void 0:Number(t.target.value))})}),r.jsx(a.zG,{})]})})]}),r.jsx(a.Wi,{control:s.control,name:"photoUrl",render:({field:e})=>(0,r.jsxs)(a.xJ,{children:[r.jsx(a.lX,{children:"URL Φωτογραφίας"}),r.jsx(a.NI,{children:r.jsx(l.I,{...e})}),r.jsx(a.zG,{})]})}),r.jsx(a.Wi,{control:s.control,name:"tags",render:({field:e})=>(0,r.jsxs)(a.xJ,{children:[r.jsx(a.lX,{children:"Tags (με κόμμα)"}),r.jsx(a.NI,{children:r.jsx(l.I,{...e})}),r.jsx(a.zG,{})]})}),r.jsx(a.Wi,{control:s.control,name:"description",render:({field:e})=>(0,r.jsxs)(a.xJ,{children:[r.jsx(a.lX,{children:"Περιγραφή"}),r.jsx(a.NI,{children:r.jsx(o.g,{...e})}),r.jsx(a.zG,{})]})}),(0,r.jsxs)(i.cN,{children:[r.jsx(i.GG,{asChild:!0,children:r.jsx(d.z,{type:"button",variant:"outline",disabled:u,children:"Ακύρωση"})}),(0,r.jsxs)(d.z,{type:"submit",disabled:u,children:[u&&r.jsx(c.Z,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Αποθήκευση":"Προσθήκη"]})]})]})})]})})}},22995:(e,t,s)=>{"use strict";s.d(t,{aR:()=>M,OL:()=>q,le:()=>W,_T:()=>L,yT:()=>R,xo:()=>J,fY:()=>T,f$:()=>O,vW:()=>A});var r=s(10326),n=s(17577),i=s(93095),a=s(48051),l=s(98958),o=s(82561),d=s(34214),c="AlertDialog",[u,m]=(0,i.b)(c,[l.p8]),x=(0,l.p8)(),p=e=>{let{__scopeAlertDialog:t,...s}=e,n=x(t);return(0,r.jsx)(l.fC,{...n,...s,modal:!0})};p.displayName=c;var h=n.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...n}=e,i=x(s);return(0,r.jsx)(l.xz,{...i,...n,ref:t})});h.displayName="AlertDialogTrigger";var f=e=>{let{__scopeAlertDialog:t,...s}=e,n=x(t);return(0,r.jsx)(l.h_,{...n,...s})};f.displayName="AlertDialogPortal";var j=n.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...n}=e,i=x(s);return(0,r.jsx)(l.aV,{...i,...n,ref:t})});j.displayName="AlertDialogOverlay";var g="AlertDialogContent",[v,y]=u(g),b=(0,d.sA)("AlertDialogContent"),N=n.forwardRef((e,t)=>{let{__scopeAlertDialog:s,children:i,...d}=e,c=x(s),u=n.useRef(null),m=(0,a.e)(t,u),p=n.useRef(null);return(0,r.jsx)(l.jm,{contentName:g,titleName:w,docsSlug:"alert-dialog",children:(0,r.jsx)(v,{scope:s,cancelRef:p,children:(0,r.jsxs)(l.VY,{role:"alertdialog",...c,...d,ref:m,onOpenAutoFocus:(0,o.M)(d.onOpenAutoFocus,e=>{e.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,r.jsx)(b,{children:i}),(0,r.jsx)(z,{contentRef:u})]})})})});N.displayName=g;var w="AlertDialogTitle",k=n.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...n}=e,i=x(s);return(0,r.jsx)(l.Dx,{...i,...n,ref:t})});k.displayName=w;var S="AlertDialogDescription",C=n.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...n}=e,i=x(s);return(0,r.jsx)(l.dk,{...i,...n,ref:t})});C.displayName=S;var I=n.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...n}=e,i=x(s);return(0,r.jsx)(l.x8,{...i,...n,ref:t})});I.displayName="AlertDialogAction";var D="AlertDialogCancel",E=n.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...n}=e,{cancelRef:i}=y(D,s),o=x(s),d=(0,a.e)(t,i);return(0,r.jsx)(l.x8,{...o,...n,ref:d})});E.displayName=D;var z=({contentRef:e})=>{let t=`\`${g}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${g}\` by passing a \`${S}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${g}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return n.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},U=s(51223),Z=s(91664);let M=p,A=h,P=n.forwardRef(({className:e,...t},s)=>r.jsx(j,{className:(0,U.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));P.displayName=j.displayName;let L=n.forwardRef(({className:e,...t},s)=>(0,r.jsxs)(f,{children:[r.jsx(P,{}),r.jsx(N,{ref:s,className:(0,U.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));L.displayName=N.displayName;let T=({className:e,...t})=>r.jsx("div",{className:(0,U.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});T.displayName="AlertDialogHeader";let J=({className:e,...t})=>r.jsx("div",{className:(0,U.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});J.displayName="AlertDialogFooter";let O=n.forwardRef(({className:e,...t},s)=>r.jsx(k,{ref:s,className:(0,U.cn)("text-lg font-semibold",e),...t}));O.displayName=k.displayName;let R=n.forwardRef(({className:e,...t},s)=>r.jsx(C,{ref:s,className:(0,U.cn)("text-sm text-muted-foreground",e),...t}));R.displayName=C.displayName;let q=n.forwardRef(({className:e,...t},s)=>r.jsx(I,{ref:s,className:(0,U.cn)((0,Z.d)(),e),...t}));q.displayName=I.displayName;let W=n.forwardRef(({className:e,...t},s)=>r.jsx(E,{ref:s,className:(0,U.cn)((0,Z.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));W.displayName=E.displayName},38443:(e,t,s)=>{"use strict";s.d(t,{C:()=>l});var r=s(10326);s(17577);var n=s(79360),i=s(51223);let a=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...s}){return r.jsx("div",{className:(0,i.cn)(a({variant:t}),e),...s})}},9280:(e,t,s)=>{"use strict";s.d(t,{X:()=>o});var r=s(10326),n=s(17577),i=s(13635),a=s(32933),l=s(51223);let o=n.forwardRef(({className:e,...t},s)=>r.jsx(i.fC,{ref:s,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(i.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:r.jsx(a.Z,{className:"h-4 w-4"})})}));o.displayName=i.fC.displayName},33269:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var r=s(10326),n=s(17577),i=s(87273),a=s(51223);let l=n.forwardRef(({className:e,value:t,...s},n)=>r.jsx(i.fC,{ref:n,className:(0,a.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:r.jsx(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));l.displayName=i.fC.displayName},84077:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>l});var r=s(68570);let n=(0,r.createProxy)(String.raw`/home/user/studio/src/app/(main)/projects/[id]/page.tsx`),{__esModule:i,$$typeof:a}=n;n.default;let l=(0,r.createProxy)(String.raw`/home/user/studio/src/app/(main)/projects/[id]/page.tsx#default`)},13635:(e,t,s)=>{"use strict";s.d(t,{fC:()=>b,z$:()=>w});var r=s(17577),n=s(48051),i=s(93095),a=s(82561),l=s(52067),o=s(53405),d=s(2566),c=s(9815),u=s(45226),m=s(10326),x="Checkbox",[p,h]=(0,i.b)(x),[f,j]=p(x);function g(e){let{__scopeCheckbox:t,checked:s,children:n,defaultChecked:i,disabled:a,form:o,name:d,onCheckedChange:c,required:u,value:p="on",internal_do_not_use_render:h}=e,[j,g]=(0,l.T)({prop:s,defaultProp:i??!1,onChange:c,caller:x}),[v,y]=r.useState(null),[b,N]=r.useState(null),w=r.useRef(!1),k=!v||!!o||!!v.closest("form"),S={checked:j,disabled:a,setChecked:g,control:v,setControl:y,name:d,form:o,value:p,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:!C(i)&&i,isFormControl:k,bubbleInput:b,setBubbleInput:N};return(0,m.jsx)(f,{scope:t,...S,children:"function"==typeof h?h(S):n})}var v="CheckboxTrigger",y=r.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:s,...i},l)=>{let{control:o,value:d,disabled:c,checked:x,required:p,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:g,isFormControl:y,bubbleInput:b}=j(v,e),N=(0,n.e)(l,h),w=r.useRef(x);return r.useEffect(()=>{let e=o?.form;if(e){let t=()=>f(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[o,f]),(0,m.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":C(x)?"mixed":x,"aria-required":p,"data-state":I(x),"data-disabled":c?"":void 0,disabled:c,value:d,...i,ref:N,onKeyDown:(0,a.M)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,a.M)(s,e=>{f(e=>!!C(e)||!e),b&&y&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});y.displayName=v;var b=r.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:r,checked:n,defaultChecked:i,required:a,disabled:l,value:o,onCheckedChange:d,form:c,...u}=e;return(0,m.jsx)(g,{__scopeCheckbox:s,checked:n,defaultChecked:i,disabled:l,required:a,onCheckedChange:d,name:r,form:c,value:o,internal_do_not_use_render:({isFormControl:e})=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(y,{...u,ref:t,__scopeCheckbox:s}),e&&(0,m.jsx)(S,{__scopeCheckbox:s})]})})});b.displayName=x;var N="CheckboxIndicator",w=r.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:r,...n}=e,i=j(N,s);return(0,m.jsx)(c.z,{present:r||C(i.checked)||!0===i.checked,children:(0,m.jsx)(u.WV.span,{"data-state":I(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});w.displayName=N;var k="CheckboxBubbleInput",S=r.forwardRef(({__scopeCheckbox:e,...t},s)=>{let{control:i,hasConsumerStoppedPropagationRef:a,checked:l,defaultChecked:c,required:x,disabled:p,name:h,value:f,form:g,bubbleInput:v,setBubbleInput:y}=j(k,e),b=(0,n.e)(s,y),N=(0,o.D)(l),w=(0,d.t)(i);r.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!a.current;if(N!==l&&e){let s=new Event("click",{bubbles:t});v.indeterminate=C(l),e.call(v,!C(l)&&l),v.dispatchEvent(s)}},[v,N,l,a]);let S=r.useRef(!C(l)&&l);return(0,m.jsx)(u.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??S.current,required:x,disabled:p,name:h,value:f,form:g,...t,tabIndex:-1,ref:b,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function C(e){return"indeterminate"===e}function I(e){return C(e)?"indeterminate":e?"checked":"unchecked"}S.displayName=k},87273:(e,t,s)=>{"use strict";s.d(t,{fC:()=>y,z$:()=>b});var r=s(17577),n=s(93095),i=s(45226),a=s(10326),l="Progress",[o,d]=(0,n.b)(l),[c,u]=o(l),m=r.forwardRef((e,t)=>{var s,r;let{__scopeProgress:n,value:l=null,max:o,getValueLabel:d=h,...u}=e;(o||0===o)&&!g(o)&&console.error((s=`${o}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=g(o)?o:100;null===l||v(l,m)||console.error((r=`${l}`,`Invalid prop \`value\` of value \`${r}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let x=v(l,m)?l:null,p=j(x)?d(x,m):void 0;return(0,a.jsx)(c,{scope:n,value:x,max:m,children:(0,a.jsx)(i.WV.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":j(x)?x:void 0,"aria-valuetext":p,role:"progressbar","data-state":f(x,m),"data-value":x??void 0,"data-max":m,...u,ref:t})})});m.displayName=l;var x="ProgressIndicator",p=r.forwardRef((e,t)=>{let{__scopeProgress:s,...r}=e,n=u(x,s);return(0,a.jsx)(i.WV.div,{"data-state":f(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...r,ref:t})});function h(e,t){return`${Math.round(e/t*100)}%`}function f(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function j(e){return"number"==typeof e}function g(e){return j(e)&&!isNaN(e)&&e>0}function v(e,t){return j(e)&&!isNaN(e)&&e<=t&&e>=0}p.displayName=x;var y=m,b=p}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9733,2401,7119,2880,8181,180,9902,5504,4610,7729,3241,4034,8508],()=>s(47064));module.exports=r})();