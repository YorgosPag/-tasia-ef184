(()=>{var e={};e.id=7154,e.ids=[7154],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},80261:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>l,routeModule:()=>m,tree:()=>u}),s(93685),s(58522),s(35866),s(32029);var r=s(23191),i=s(88716),n=s(37922),a=s.n(n),o=s(95231),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(t,c);let u=["",{children:["(main)",{children:["contacts",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,93685)),"/home/user/studio/src/app/(main)/contacts/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,58522)),"/home/user/studio/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,32029)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],l=["/home/user/studio/src/app/(main)/contacts/new/page.tsx"],d="/(main)/contacts/new/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/contacts/new/page",pathname:"/contacts/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},95041:(e,t,s)=>{Promise.resolve().then(s.bind(s,84798))},84798:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(10326),i=s(17577),n=s(35047),a=s(74723),o=s(74064),c=s(76),u=s(11552),l=s(90445),d=s(84097),p=s(91664),m=s(29752),x=s(9969),h=s(86333),y=s(77506),g=s(31215),b=s(47806),f=s(74436),q=s(51641),w=s(49260);function j(){let e=(0,n.useRouter)(),{toast:t}=(0,d.pm)(),{user:s}=(0,w.a)(),[j,v]=(0,i.useState)(!1),[P,_]=(0,i.useState)(null),D=(0,a.cI)({resolver:(0,o.F)(f.O),defaultValues:{name:"",entityType:"Φυσικό Πρόσωπο",photoUrls:{},identity:{type:"Ταυτότητα",number:"",issuingAuthority:""},emails:[],phones:[],socials:[],addresses:[],job:{role:"",specialty:""},notes:""}}),E=async r=>{v(!0);let i={...r};r.birthDate?i.birthDate=c.EK.fromDate(new Date(r.birthDate)):i.birthDate=null,r.identity?.issueDate?i.identity.issueDate=c.EK.fromDate(new Date(r.identity.issueDate)):i.identity&&(i.identity.issueDate=null),r.addresses&&(i.addresses=r.addresses);let n=function e(t){for(let s in t)void 0===t[s]?delete t[s]:"object"==typeof t[s]&&null!==t[s]&&(e(t[s]),0===Object.keys(t[s]).length&&delete t[s]);return t}(i);try{let i=await (0,c.ET)((0,c.hJ)(l.db,"contacts"),{...n,createdAt:(0,c.Bt)(),createdBy:s?.uid});if(await (0,q.a)("CREATE_CONTACT",{entityId:i.id,entityType:"contact",name:r.name}),P){t({title:"Η επαφή αποθηκεύτηκε",description:"Ανέβασμα φωτογραφίας..."});let e=`contact-images/${i.id}/${P.name}`,s=(0,u.iH)(l.tO,e);await (0,u.KV)(s,P);let r=await (0,u.Jt)(s);await (0,c.r7)(i,{photoUrl:r}),await (0,q.a)("UPDATE_CONTACT",{entityId:i.id,entityType:"contact",changes:{photoUrl:r}})}t({title:"Επιτυχία",description:`Η επαφή "${r.name}" δημιουργήθηκε.`}),e.push("/contacts")}catch(e){console.error("Error adding contact: ",e),t({variant:"destructive",title:"Σφάλμα",description:`Δεν ήταν δυνατή η δημιουργία της επαφής: ${e.message}`})}finally{v(!1)}};return r.jsx(x.l0,{...D,children:(0,r.jsxs)("form",{onSubmit:D.handleSubmit(E),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(p.z,{type:"button",variant:"outline",size:"sm",onClick:()=>e.back(),children:[r.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Πίσω στις Επαφές"]}),(0,r.jsxs)(p.z,{type:"submit",disabled:j,children:[j?r.jsx(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}):r.jsx(g.Z,{className:"mr-2 h-4 w-4"}),"Αποθήκευση Επαφής"]})]}),(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{children:[r.jsx(m.ll,{children:"Δημιουργία Νέας Επαφής"}),r.jsx(m.SZ,{children:"Συμπληρώστε τα παρακάτω πεδία για να δημιουργήσετε μια νέα επαφή."})]}),r.jsx(m.aY,{children:r.jsx(b.t,{form:D,onFileSelect:_})})]})]})})}},93685:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>n,default:()=>o});var r=s(68570);let i=(0,r.createProxy)(String.raw`/home/user/studio/src/app/(main)/contacts/new/page.tsx`),{__esModule:n,$$typeof:a}=i;i.default;let o=(0,r.createProxy)(String.raw`/home/user/studio/src/app/(main)/contacts/new/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9733,2401,7119,2880,8181,180,9902,5504,4610,2996,3786,7453,7729,3241,4034,1971],()=>s(80261));module.exports=r})();